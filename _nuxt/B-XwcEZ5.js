import{e as P,o as d,c as g,a as p,h as E,F as U,r as J,t as M,n as L,q as D,b as S,s as Oe,v as W,x as $e,d as he,k as N,g as O,w as ce,T as ht,y as ea,z as ye,A as we,l as j,B as La,C as ta,D as aa,E as We,G as na,H as Ua,I as vt,J as Ke,K as re,L as Te,M as bt,N as ae,O as Fa,Q as ke,R as oa,S as Ha,f as ot,U as Ra,V as Wa,W as sa,p as st,X as ra,Y as qa,Z as Qa,$ as Ka,a0 as Ya,a1 as Ga}from"./C88qKsPz.js";import{t as Xa,a as Ja,_ as Za,b as Ye,c as ia,u as Ge,d as la,e as ua,f as qe,g as rt,h as en,i as ca,j as tn,k as an}from"./CkARFHBF.js";import Ce from"./CxH68gFP.js";import{c as _t,a as xt,b as wt,u as nn}from"./oP2VfrXJ.js";import{_ as ze}from"./DlAUqK2U.js";import{_ as Ue,u as on}from"./LwmaiI8-.js";import{_ as sn}from"./BL-QnSrB.js";function Ut(e){var t;const a=Xa(e);return(t=a==null?void 0:a.$el)!=null?t:a}const rn={key:0,class:"w-1/4"},ln=["src"],un={class:""},cn=["src"],dn={class:"font-bold"},pn={class:"m-1"},fn=P({__name:"MultipleChoiceQuestion",props:{data:{}},setup(e){return(t,a)=>(d(),g(U,null,[t.data.image?(d(),g("div",rn,[p("img",{src:t.data.image,alt:"Question Image"},null,8,ln)])):E("",!0),p("div",un,[p("audio",{src:t.data.audio,controls:"",class:"mb-4"},null,8,cn),(d(!0),g(U,null,J(t.data.content_details.questions||t.data.categories,(n,o)=>(d(),g("div",{key:o,class:"border-r-2 border-l-2 border-t-2 border-b-2 border-tarawera-200 rounded-[10px] p-2"},[p("h4",dn,M(n.question),1),(d(!0),g(U,null,J(n.answers||t.data.content_details.text_items,(s,l)=>(d(),g("div",{key:l,class:L([{"flex justify-start":s.isCorrect,"bg-tarawera-200":s.isCorrect},"rounded-[10px]"])},[p("p",pn,M(s.text),1)],2))),128))]))),128))])],64))}}),vn={class:"mt-4"},mn={class:"font-bold mb-3"},gn={class:"flex gap-4"},yn=P({__name:"TrueFalse",props:{question:{}},setup(e){return(t,a)=>(d(),g("div",vn,[p("h4",mn,M(t.question.statement),1),p("div",gn,[p("p",{class:L(["px-4 py-2 rounded-md",{"bg-tarawera-200":t.question.stated==="True"}])},"True",2),p("p",{class:L(["px-4 py-2 rounded-md",{"bg-tarawera-200":t.question.stated==="False"}])},"False",2),p("p",{class:L(["px-4 py-2 rounded-md",{"bg-tarawera-200":t.question.stated==="Not stated"}])},"Not stated",2)])]))}}),hn={class:"flex flex-col gap-4"},bn={class:"flex flex-wrap gap-2 bg-fuscia-100 rounded-lg bg-fuscous-gray-100 p-2"},_n=["onClick"],xn={class:"text-lg"},wn=P({__name:"WordBank",props:{data:{}},setup(e){const t=e,a=()=>{const r=new Set;return t.data.forEach(c=>{c.keywords.forEach(u=>r.add(u.word)),c.extraWords.forEach(u=>r.add(u))}),Array.from(r).sort(()=>Math.random()-.5)},n=r=>r.text.split(" ").map(c=>{if(c.startsWith("__")&&c.endsWith("__")){const f=parseInt(c.replace(/__/g,"")),y=r.keywords.find(m=>m.position===f);return{text:(y==null?void 0:y.word)||c,isKeyword:!0}}return{text:c,isKeyword:!1}}),o=r=>t.data.some(i=>i.keywords.some(c=>c.word===r)),s=D(null),l=r=>{s.value=r};return(r,i)=>(d(),g("div",hn,[p("div",bn,[(d(!0),g(U,null,J(a(),c=>(d(),g("span",{key:c,onClick:u=>l(c),class:L(["w-contain rounded-md shadow-sm cursor-pointer p-1",o(c)?"bg-tarawera-200 hover:bg-tarawera-600":"hover:bg-gray-100"])},M(c),11,_n))),128))]),(d(!0),g(U,null,J(r.data,(c,u)=>(d(),g("div",{key:u},[p("p",xn,[(d(!0),g(U,null,J(n(c),(f,y)=>(d(),g("span",{key:y,class:L(["px-1 text-sm",f.isKeyword?" rounded min-w-[20px] inline-block":""])},M(f.isKeyword?"__":f.text),3))),128))])]))),128))]))}}),kn={class:"text-center flex-wrap rounded-md p-2 flex w-full mx-auto justify-evenly bottom-6 shadow-lg bg-white left-0 right-0"},$n=["onClick"],Tn={class:"text-[0.7rem] text-primary-color hover:text-tarawera-700 cursor-pointer max-w-14"},Ft=P({__name:"EditClassNavigation",setup(e){const t=[{name:"tabler:layout-filled",label:"Layout block"},{name:"mingcute:video-fill",label:"Video layout"},{name:"fluent:text-add-20-filled",label:"Text block"},{name:"typcn:info",label:"Info block"},{name:"solar:gallery-bold",label:"Gallery layout"},{name:"mdi:multimedia",label:"Multimedia block"},{name:"ph:student-fill",label:"Knowledge check"},{name:"icon-park-solid:down-c",label:"Continue"}];return(a,n)=>{const o=Ce;return d(),g("ul",kn,[(d(),g(U,null,J(t,s=>p("li",{key:s.name,class:"flex flex-col items-center",onClick:l=>a.$emit("open-modal",s.label,s.name)},[S(o,{name:s.name,size:"20",class:"text-primary-color hover:text-tarawera-700 cursor-pointer text-xs"},null,8,["name"]),p("p",Tn,M(s.label),1)],8,$n)),64))])}}}),Cn={base:"inline-flex items-center justify-center text-gray-900 dark:text-white",padding:"px-1",size:{xs:"h-4 min-w-[16px] text-[10px]",sm:"h-5 min-w-[20px] text-[11px]",md:"h-6 min-w-[24px] text-[12px]"},rounded:"rounded",font:"font-medium font-sans",background:"bg-gray-100 dark:bg-gray-800",ring:"ring-1 ring-gray-300 dark:ring-gray-700 ring-inset",default:{size:"sm"}},On={wrapper:"w-full flex flex-col gap-2",indicator:{container:{base:"flex flex-row justify-end",width:"min-w-fit",transition:"transition-all"},align:"text-end",width:"w-fit",color:"text-gray-400 dark:text-gray-500",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},progress:{base:"block appearance-none border-none overflow-hidden",width:"w-full [&::-webkit-progress-bar]:w-full",size:{"2xs":"h-px",xs:"h-0.5",sm:"h-1",md:"h-2",lg:"h-3",xl:"h-4","2xl":"h-5"},rounded:"rounded-full [&::-webkit-progress-bar]:rounded-full",track:"[&::-webkit-progress-bar]:bg-gray-200 [&::-webkit-progress-bar]:dark:bg-gray-700 [@supports(selector(&::-moz-progress-bar))]:bg-gray-200 [@supports(selector(&::-moz-progress-bar))]:dark:bg-gray-700",bar:"[&::-webkit-progress-value]:rounded-full [&::-webkit-progress-value]:transition-all [&::-webkit-progress-value]:ease-in-out [&::-moz-progress-bar]:rounded-full",color:"text-{color}-500 dark:text-{color}-400",background:"[&::-webkit-progress-value]:bg-current [&::-moz-progress-bar]:bg-current",indeterminate:{base:"indeterminate:relative",rounded:"indeterminate:after:rounded-full [&:indeterminate::-webkit-progress-value]:rounded-full [&:indeterminate::-moz-progress-bar]:rounded-full"}},steps:{base:"grid grid-cols-1",color:"text-{color}-500 dark:text-{color}-400",size:{"2xs":"text-xs",xs:"text-xs",sm:"text-sm",md:"text-sm",lg:"text-sm",xl:"text-base","2xl":"text-base"}},step:{base:"transition-all opacity-0 truncate row-start-1 col-start-1",align:"text-end",active:"opacity-100",first:"text-gray-500 dark:text-gray-400"},animation:{carousel:"bar-animation-carousel","carousel-inverse":"bar-animation-carousel-inverse",swing:"bar-animation-swing",elastic:"bar-animation-elastic"},default:{color:"primary",size:"md",animation:"carousel"}},Sn={base:"relative inline-flex flex-shrink-0 border-2 border-transparent disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",rounded:"rounded-full",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",active:"bg-{color}-500 dark:bg-{color}-400",inactive:"bg-gray-200 dark:bg-gray-700",size:{"2xs":"h-3 w-5",xs:"h-3.5 w-6",sm:"h-4 w-7",md:"h-5 w-9",lg:"h-6 w-11",xl:"h-7 w-[3.25rem]","2xl":"h-8 w-[3.75rem]"},container:{base:"pointer-events-none relative inline-block rounded-full bg-white dark:bg-gray-900 shadow transform ring-0 transition ease-in-out duration-200",active:{"2xs":"translate-x-2 rtl:-translate-x-2",xs:"translate-x-2.5 rtl:-translate-x-2.5",sm:"translate-x-3 rtl:-translate-x-3",md:"translate-x-4 rtl:-translate-x-4",lg:"translate-x-5 rtl:-translate-x-5",xl:"translate-x-6 rtl:-translate-x-6","2xl":"translate-x-7 rtl:-translate-x-7"},inactive:"translate-x-0 rtl:-translate-x-0",size:{"2xs":"h-2 w-2",xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6","2xl":"h-7 w-7"}},icon:{base:"absolute inset-0 h-full w-full flex items-center justify-center transition-opacity",active:"opacity-100 ease-in duration-200",inactive:"opacity-0 ease-out duration-100",size:{"2xs":"h-2 w-2",xs:"h-2 w-2",sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5","2xl":"h-6 w-6"},on:"text-{color}-500 dark:text-{color}-400",off:"text-gray-400 dark:text-gray-500",loading:"animate-spin text-{color}-500 dark:text-{color}-400"},default:{onIcon:null,offIcon:null,loadingIcon:"i-heroicons-arrow-path-20-solid",color:"primary",size:"md"}},An={wrapper:"relative inline-flex",container:"z-20 group",width:"max-w-xs",background:"bg-white dark:bg-gray-900",color:"text-gray-900 dark:text-white",shadow:"shadow",rounded:"rounded",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"[@media(pointer:coarse)]:hidden h-6 px-2 py-1 text-xs font-normal truncate relative",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5",middot:"mx-1 text-gray-700 dark:text-gray-200",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},popper:{strategy:"fixed"},default:{openDelay:0,closeDelay:0},arrow:{...Ja,base:"[@media(pointer:coarse)]:hidden invisible before:visible before:block before:rotate-45 before:z-[-1] before:w-2 before:h-2"}},In=["onClick"],jn=P({__name:"InteractiveTask",props:{menuItems:{}},emits:["select-task"],setup(e,{emit:t}){const a=D(null),n=t,o=s=>{a.value=s,n("select-task",s)};return(s,l)=>(d(),g(U,null,[l[0]||(l[0]=p("h3",{class:"text-md font-bold text-gray-700 mb-2"},"Modules",-1)),p("ul",null,[(d(!0),g(U,null,J(s.menuItems,r=>{var i;return d(),g("li",{key:r.type,onClick:c=>o(r),class:L(["flex items-center gap-2 hover:bg-gray-200 rounded cursor-pointer text-sm text-gray-700 mb-2",((i=a.value)==null?void 0:i.type)===r.type?"bg-gray-200":""])},M(r.name),11,In)}),128))])],64))}}),En={key:0,class:"fixed top-0 left-0 w-full min-h-full bg-gray-600 bg-opacity-50 flex justify-center items-center"},zn={class:"bg-white pr-6 rounded-lg shadow-lg w-[95vw] h-[95vh] overflow-y-auto flex gap-4"},Mn={class:"flex-1 mt-6"},Dn={class:"flex justify-between items-center mb-4 border-b-[1px] sticky top-0 bg-white z-10"},Bn={class:"flex items-center gap-2 m-2"},Vn={class:"text-m font-bold text-primary-color"},Pn={class:"flex gap-4"},Nn={class:"w-48 bg-gray-100 p-4 rounded-lg h-fit sticky top-1"},Ln={class:"flex-1"},Un={class:"space-y-4 mb-6"},Fn=P({__name:"BaseTaskModal",props:{isOpen:Boolean,title:String,modelValue:Object,icon:String,type:String,menuItems:Array},emits:["update:modelValue","close"],setup(e,{emit:t}){const a=D(""),n=Oe(),o=D({title:"",instructions:""});W(o,r=>{s("update:modelValue",r),n.addTask("instructions",r)},{deep:!0});const s=t,l=r=>{n.addTask("taskTitle",r.name),a.value=r.name,console.log(a.value)};return(r,i)=>{const c=Ce,u=Ye;return e.isOpen?(d(),g("div",En,[p("div",zn,[p("div",Mn,[p("div",Dn,[p("div",Bn,[S(c,{name:e.icon,size:"30",class:"text-primary-color"},null,8,["name"]),p("h2",Vn,M(e.title),1)]),p("img",{src:Za,alt:"close create course",class:"w-5 h-5 cursor-pointer",onClick:i[0]||(i[0]=f=>r.$emit("close"))})]),p("div",Pn,[p("div",Nn,[S(jn,{menuItems:e.menuItems,onSelectTask:l},null,8,["menuItems"])]),p("div",Ln,[p("div",Un,[S(u,{title:"Title",type:"text",class:"text-md",modelValue:o.value.title,"onUpdate:modelValue":i[1]||(i[1]=f=>o.value.title=f)},null,8,["modelValue"]),S(u,{title:"Instructions",type:"text_area",size:a.value==="Info Box"?"xl":"lg",class:"text-md",modelValue:o.value.instructions,"onUpdate:modelValue":i[2]||(i[2]=f=>o.value.instructions=f)},null,8,["size","modelValue"])]),$e(r.$slots,"default")])])])])])):E("",!0)}}}),Hn={class:"bg-white rounded-lg p-4 shadow-sm mb-4"},Rn={class:"flex items-center justify-between mb-3"},Wn={class:"text-lg font-medium"},qn={class:"relative bg-gray-100 rounded-xl p-2"},Qn={class:"flex p-2"},Kn=["src"],Yn=["src"],Gn={key:0,class:"mt-4 overflow-hidden transform transition-all duration-300 ease-out"},Xn={class:"text-gray-600"},Jn=P({__name:"Audio",props:{task:{}},setup(e){const t=D(!0);return(a,n)=>(d(),g("div",Hn,[p("div",Rn,[p("h3",Wn,M(a.task.title||""),1)]),p("div",qn,[p("div",Qn,[p("audio",{src:a.task.audio,controls:"",preload:"metadata",class:"flex-1 h-12 [&::-webkit-media-controls-panel]:bg-transparent"},[p("source",{src:a.task.audio,type:"audio/mp3"},null,8,Yn),n[1]||(n[1]=he(" Your browser does not support the audio tag. "))],8,Kn),a.task.audio_transcription?(d(),g("button",{key:0,onClick:n[0]||(n[0]=o=>t.value=!t.value),class:"hover:bg-gray-200 rounded-full transition-colors"},[t.value?(d(),N(O(Ce),{key:0,name:"solar:eye-closed-bold",class:"text-tarawera-600 group-hover:text-fuscous-gray-600",size:"20"})):(d(),N(O(Ce),{key:1,name:"solar:list-bold",size:"20",class:"text-tarawera-600 group-hover:text-fuscous-gray-600"}))])):E("",!0)])]),S(ht,{name:"slide-fade"},{default:ce(()=>[a.task.audio_transcription&&t.value?(d(),g("div",Gn,[n[2]||(n[2]=p("p",{class:"text-gray-700 font-medium mb-2"},"Script:",-1)),p("p",Xn,M(a.task.audio_transcription),1)])):E("",!0)]),_:1})]))}}),da=()=>({capitalizeFirstLetter:t=>t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()}),Zn={class:"relative p-8 w-full min-h-[420px] my-4"},eo={class:"relative w-full max-w-4xl mx-auto rounded-lg overflow-hidden z-5"},to={class:"flex justify-start gap-2 my-2"},ao={class:"bg-tarawera-200 text-tarawera-800 px-2 py-1 rounded-md"},no={class:"text-lg font-bold bg-white text-tarawera-700 px-4"},oo={class:""},so=["src"],ro=["src"],io=P({__name:"Video",props:{index:{},task:{}},setup(e){const{capitalizeFirstLetter:t}=da();return(a,n)=>(d(),g("div",Zn,[a.task.image?(d(),g("div",{key:0,class:"absolute top-0 left-0 w-full h-full bg-cover bg-center rounded-2xl",style:ea(`background-image: url('${a.task.image}')`)},null,4)):E("",!0),p("div",eo,[ye(p("div",to,[p("p",ao,M(a.index),1),p("h3",no,M(O(t)(a.task.tittle)),1)],512),[[we,a.task.tittle]]),p("p",oo,M(a.task.instructions),1),a.task.video?(d(),g("video",{key:0,src:a.task.video,class:"w-[80%] aspect-video m-auto rounded-lg",controls:"",preload:"metadata"},[p("source",{src:a.task.video,type:"video/mp4"},null,8,ro),n[0]||(n[0]=he(" Your browser does not support the video tag. "))],8,so)):E("",!0)])]))}}),lo=()=>({beforeEnter:n=>{n.style.transform="translateY(100%)",n.style.transition="transform 0.5s ease"},enter:n=>{n.offsetHeight,n.style.transform="translateY(0)"},leave:n=>{n.style.transform="translateY(100%)"}}),uo=[{name:"Multiple choice",type:"multiple_choice"},{name:"True or false",type:"true_false"},{name:"Fill in the gaps",type:"fill_gaps"},{name:"Word bank",type:"word_bank"},{name:"Categories",type:"Categories"}],Ht=[{name:"Video",type:"video"},{name:"Audio",type:"audio"}],Rt=[{name:"Plain Text",type:"text_block"},{name:"Info Box",type:"info_box"}],co=[{name:"images",type:"images"}],po=()=>({getDataMenu:t=>t==="Knowledge check"||t==="Layout block"?uo:t==="Multimedia block"?Ht:t==="Text block"?Rt:t==="Video layout"?[Ht[0]]:t==="Info block"?[Rt[1]]:t==="Gallery layout"?co:[]});function fo(e,t,a){let n=D(a==null?void 0:a.value),o=j(()=>e.value!==void 0);return[j(()=>o.value?e.value:n.value),function(s){return o.value||(n.value=s),t==null?void 0:t(s)}]}var Wt;let pa=Symbol("headlessui.useid"),vo=0;const mo=(Wt=ta)!=null?Wt:function(){return aa(pa,()=>`${++vo}`)()};function go(e){La(pa,e)}function tt(e){var t;if(e==null||e.value==null)return null;let a=(t=e.value.$el)!=null?t:e.value;return a instanceof Node?a:null}function fa(e,t,...a){if(e in t){let o=t[e];return typeof o=="function"?o(...a):o}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,fa),n}function qt(e,t){if(e)return e;let a=t??"button";if(typeof a=="string"&&a.toLowerCase()==="button")return"button"}function yo(e,t){let a=D(qt(e.value.type,e.value.as));return We(()=>{a.value=qt(e.value.type,e.value.as)}),na(()=>{var n;a.value||tt(t)&&tt(t)instanceof HTMLButtonElement&&!((n=tt(t))!=null&&n.hasAttribute("type"))&&(a.value="button")}),a}var ho=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(ho||{}),bo=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(bo||{});function va({visible:e=!0,features:t=0,ourProps:a,theirProps:n,...o}){var s;let l=ga(n,a),r=Object.assign(o,{props:l});if(e||t&2&&l.static)return dt(r);if(t&1){let i=(s=l.unmount)==null||s?0:1;return fa(i,{0(){return null},1(){return dt({...o,props:{...l,hidden:!0,style:{display:"none"}}})}})}return dt(r)}function dt({props:e,attrs:t,slots:a,slot:n,name:o}){var s,l;let{as:r,...i}=ya(e,["unmount","static"]),c=(s=a.default)==null?void 0:s.call(a,n),u={};if(n){let f=!1,y=[];for(let[m,h]of Object.entries(n))typeof h=="boolean"&&(f=!0),h===!0&&y.push(m);f&&(u["data-headlessui-state"]=y.join(" "))}if(r==="template"){if(c=ma(c??[]),Object.keys(i).length>0||Object.keys(t).length>0){let[f,...y]=c??[];if(!xo(f)||y.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${o} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(i).concat(Object.keys(t)).map(x=>x.trim()).filter((x,b,_)=>_.indexOf(x)===b).sort((x,b)=>x.localeCompare(b)).map(x=>`  - ${x}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(x=>`  - ${x}`).join(`
`)].join(`
`));let m=ga((l=f.props)!=null?l:{},i,u),h=Ua(f,m,!0);for(let x in m)x.startsWith("on")&&(h.props||(h.props={}),h.props[x]=m[x]);return h}return Array.isArray(c)&&c.length===1?c[0]:c}return vt(r,Object.assign({},i,u),{default:()=>c})}function ma(e){return e.flatMap(t=>t.type===U?ma(t.children):[t])}function ga(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},a={};for(let n of e)for(let o in n)o.startsWith("on")&&typeof n[o]=="function"?(a[o]!=null||(a[o]=[]),a[o].push(n[o])):t[o]=n[o];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(a).map(n=>[n,void 0])));for(let n in a)Object.assign(t,{[n](o,...s){let l=a[n];for(let r of l){if(o instanceof Event&&o.defaultPrevented)return;r(o,...s)}}});return t}function _o(e){let t=Object.assign({},e);for(let a in t)t[a]===void 0&&delete t[a];return t}function ya(e,t=[]){let a=Object.assign({},e);for(let n of t)n in a&&delete a[n];return a}function xo(e){return e==null?!1:typeof e.type=="string"||typeof e.type=="object"||typeof e.type=="function"}var ha=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ha||{});let wo=P({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(e,{slots:t,attrs:a}){return()=>{var n;let{features:o,...s}=e,l={"aria-hidden":(o&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(o&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(o&4)===4&&(o&2)!==2&&{display:"none"}}};return va({ourProps:l,theirProps:s,slot:{},attrs:a,slots:t,name:"Hidden"})}}});var mt=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(mt||{});function ko(e){var t,a;let n=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(n){for(let o of n.elements)if(o!==e&&(o.tagName==="INPUT"&&o.type==="submit"||o.tagName==="BUTTON"&&o.type==="submit"||o.nodeName==="INPUT"&&o.type==="image")){o.click();return}(a=n.requestSubmit)==null||a.call(n)}}let $o=Symbol("GroupContext"),To=P({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:t,attrs:a,slots:n,expose:o}){var s;let l=(s=e.id)!=null?s:`headlessui-switch-${mo()}`,r=aa($o,null),[i,c]=fo(j(()=>e.modelValue),w=>t("update:modelValue",w),j(()=>e.defaultChecked));function u(){c(!i.value)}let f=D(null),y=r===null?f:r.switchRef,m=yo(j(()=>({as:e.as,type:a.type})),y);o({el:y,$el:y});function h(w){w.preventDefault(),u()}function x(w){w.key===mt.Space?(w.preventDefault(),u()):w.key===mt.Enter&&ko(w.currentTarget)}function b(w){w.preventDefault()}let _=j(()=>{var w,C;return(C=(w=tt(y))==null?void 0:w.closest)==null?void 0:C.call(w,"form")});return We(()=>{W([_],()=>{if(!_.value||e.defaultChecked===void 0)return;function w(){c(e.defaultChecked)}return _.value.addEventListener("reset",w),()=>{var C;(C=_.value)==null||C.removeEventListener("reset",w)}},{immediate:!0})}),()=>{let{name:w,value:C,form:$,tabIndex:I,...z}=e,k={checked:i.value},H={id:l,ref:y,role:"switch",type:m.value,tabIndex:I===-1?0:I,"aria-checked":i.value,"aria-labelledby":r==null?void 0:r.labelledby.value,"aria-describedby":r==null?void 0:r.describedby.value,onClick:h,onKeyup:x,onKeypress:b};return vt(U,[w!=null&&i.value!=null?vt(wo,_o({features:ha.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:i.value,form:$,disabled:z.disabled,name:w,value:C})):null,va({ourProps:H,theirProps:{...a,...ya(z,["modelValue","defaultChecked"])},slot:k,attrs:a,slots:n,name:"Switch"})])}}});const Ie=Ke(re.ui.strategy,re.ui.toggle,Sn),Co=P({components:{HSwitch:To,UIcon:ia},inheritAttrs:!1,props:{id:{type:String,default:null},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onIcon:{type:String,default:()=>Ie.default.onIcon},offIcon:{type:String,default:()=>Ie.default.offIcon},loadingIcon:{type:String,default:()=>Ie.default.loadingIcon},color:{type:String,default:()=>Ie.default.color,validator(e){return re.ui.colors.includes(e)}},size:{type:String,default:()=>Ie.default.size,validator(e){return Object.keys(Ie.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:t}){const{ui:a,attrs:n}=Ge("toggle",Te(e,"ui"),Ie),{emitFormChange:o,color:s,inputId:l,name:r}=la(e),i=j({get(){return e.modelValue},set(h){t("update:modelValue",h),t("change",h),o()}}),c=j(()=>bt(ae(a.value.base,a.value.size[e.size],a.value.rounded,s.value&&a.value.ring.replaceAll("{color}",s.value),s.value&&(i.value?a.value.active:a.value.inactive).replaceAll("{color}",s.value)),e.class)),u=j(()=>ae(a.value.container.base,a.value.container.size[e.size],i.value?a.value.container.active[e.size]:a.value.container.inactive)),f=j(()=>ae(a.value.icon.size[e.size],s.value&&a.value.icon.on.replaceAll("{color}",s.value))),y=j(()=>ae(a.value.icon.size[e.size],s.value&&a.value.icon.off.replaceAll("{color}",s.value))),m=j(()=>ae(a.value.icon.size[e.size],s.value&&a.value.icon.loading.replaceAll("{color}",s.value)));return go(()=>ta()),{ui:a,attrs:n,name:r,inputId:l,active:i,switchClass:c,containerClass:u,onIconClass:f,offIconClass:y,loadingIconClass:m}}});function Oo(e,t,a,n,o,s){const l=ia,r=Fa("HSwitch");return d(),N(r,ke({id:e.inputId,modelValue:e.active,"onUpdate:modelValue":t[0]||(t[0]=i=>e.active=i),name:e.name,disabled:e.disabled||e.loading,class:e.switchClass},e.attrs),{default:ce(()=>[p("span",{class:L(e.containerClass)},[e.loading?(d(),g("span",{key:0,class:L([e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[S(l,{name:e.loadingIcon,class:L(e.loadingIconClass)},null,8,["name","class"])],2)):E("",!0),!e.loading&&e.onIcon?(d(),g("span",{key:1,class:L([e.active?e.ui.icon.active:e.ui.icon.inactive,e.ui.icon.base]),"aria-hidden":"true"},[S(l,{name:e.onIcon,class:L(e.onIconClass)},null,8,["name","class"])],2)):E("",!0),!e.loading&&e.offIcon?(d(),g("span",{key:2,class:L([e.active?e.ui.icon.inactive:e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[S(l,{name:e.offIcon,class:L(e.offIconClass)},null,8,["name","class"])],2)):E("",!0)],2)]),_:1},16,["id","modelValue","name","disabled","class"])}const So=ze(Co,[["render",Oo]]),it=P({__name:"Toggle",emits:["update:modelValue"],setup(e){const t=D(!1);return(a,n)=>{const o=So;return d(),N(o,{modelValue:O(t),"onUpdate:modelValue":n[0]||(n[0]=s=>oa(t)?t.value=s:null),size:"sm",class:L({"z-0":!0,"items-center":!0,"bg-tarawera-700 text-white":O(t),"bg-fuscous-gray-100 text-fuscous-gray-600":!O(t)}),onClick:n[1]||(n[1]=s=>a.$emit("update:modelValue",!O(t)))},null,8,["modelValue","class"])}}}),Me=Ke(re.ui.strategy,re.ui.progress,On),Ao=P({inheritAttrs:!1,props:{value:{type:Number,default:null},max:{type:[Number,Array],default:100},indicator:{type:Boolean,default:!1},animation:{type:String,default:()=>Me.default.animation,validator(e){return Object.keys(Me.animation).includes(e)}},size:{type:String,default:()=>Me.default.size,validator(e){return Object.keys(Me.progress.size).includes(e)}},color:{type:String,default:()=>Me.default.color,validator(e){return re.ui.colors.includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:t,attrs:a}=Ge("progress",Te(e,"ui"),Me,Te(e,"class")),n=j(()=>ae(t.value.indicator.container.base,t.value.indicator.container.width,t.value.indicator.container.transition)),o=j(()=>ae(t.value.indicator.align,t.value.indicator.width,t.value.indicator.color,t.value.indicator.size[e.size])),s=j(()=>{var w;const _=[t.value.progress.base,t.value.progress.width,t.value.progress.size[e.size],t.value.progress.rounded,t.value.progress.track,t.value.progress.bar,(w=t.value.progress.color)==null?void 0:w.replaceAll("{color}",e.color),t.value.progress.background,t.value.progress.indeterminate.base,t.value.progress.indeterminate.rounded];return m.value&&_.push(t.value.animation[e.animation]),ae(..._)}),l=j(()=>{var _;return ae(t.value.steps.base,(_=t.value.steps.color)==null?void 0:_.replaceAll("{color}",e.color),t.value.steps.size[e.size])}),r=j(()=>ae(t.value.step.base,t.value.step.align)),i=j(()=>ae(t.value.step.active)),c=j(()=>ae(t.value.step.first));function u(_){return _===Number(e.value)}function f(_){return _===0}function y(_){_=Number(_);const w=[r.value];return f(_)&&w.push(c.value),u(_)&&w.push(i.value),w.join(" ")}const m=j(()=>e.value===void 0||e.value===null),h=j(()=>Array.isArray(e.max)),x=j(()=>m.value?null:Array.isArray(e.max)?e.max.length-1:Number(e.max)),b=j(()=>{if(!m.value)switch(!0){case e.value<0:return 0;case e.value>x.value:return 100;default:return e.value/x.value*100}});return{ui:t,attrs:a,indicatorContainerClass:n,indicatorClass:o,progressClass:s,stepsClass:l,stepClasses:y,isIndeterminate:m,isSteps:h,realMax:x,percent:b}}}),Io=["aria-valuemax","aria-valuenow"];function jo(e,t,a,n,o,s){return d(),g("div",{class:L(e.ui.wrapper),role:"progressbar"},[e.indicator||e.$slots.indicator?$e(e.$slots,"indicator",Ha(ke({key:0},{percent:e.percent})),()=>[e.isSteps?E("",!0):(d(),g("div",{key:0,class:L(e.indicatorContainerClass),style:ea({width:`${e.percent}%`})},[p("div",{class:L(e.indicatorClass)},M(Math.round(e.percent))+"% ",3)],6))],!0):E("",!0),p("progress",ke({"aria-valuemax":e.realMax,"aria-valuenow":e.value,class:e.progressClass},{value:e.value,max:e.realMax,...e.attrs}),M(e.percent!==void 0?`${Math.round(e.percent)}%`:void 0),17,Io),e.isSteps?(d(),g("div",{key:1,class:L(e.stepsClass)},[(d(!0),g(U,null,J(e.max,(l,r)=>(d(),g("div",{key:r,class:L(e.stepClasses(r))},[$e(e.$slots,`step-${r}`,ke({ref_for:!0},{step:l}),()=>[he(M(l),1)],!0)],2))),128))],2)):E("",!0)],2)}const Eo=ze(Ao,[["render",jo],["__scopeId","data-v-157fbd8e"]]),zo={class:"text-s font-bold text-tarawera-700 my-4"},Mo={class:"text-s font-bold text-tarawera-700 my-4"},Do={class:"flex items-center gap-2 py-4 text-sm"},ba=P({__name:"VideoBlock",setup(e){const t=D("Video"),a=_t(),n=ot(),o=Oe(),s=j(()=>o.getTask("instructions")),l=j(()=>o.getTask("taskTitle")),r=D(!1),i=Ra({tittle:"",instructions:"",video_transcription:"",audio_transcription:"",image:null,video:null,audio:null}),c=ua({mutationFn:async m=>(await xt.post(wt.classContent,m,{headers:{"Content-Type":"multipart/form-data"},timeout:18e5,onUploadProgress:x=>{const b=Math.round(x.loaded*100/(x.total||1));console.log(`Upload Progress: ${b}%`)}})).data,onSuccess:m=>{console.log("Content saved successfully:",m)},onError:m=>{console.error("Error saving content:",m)}}),u=j(()=>c.isPending.value),f=async()=>{const m=new FormData;m.append("class_id",n.params.classId.toString()),m.append("content_type",t.value.toLowerCase()),m.append("tittle",i.tittle),m.append("instructions",i.instructions),m.append("video_transcription",i.video_transcription),m.append("audio_transcription",i.audio_transcription),t.value==="Video"&&(m.append("image",i.image),m.append("video",i.video)),t.value==="Audio"&&m.append("audio",i.audio);try{const h=await c.mutateAsync(m);console.log("Full server response:",h),await a.invalidateQueries({queryKey:["class-contents",n.params.classId]}),y()}catch(h){console.error("Error details:",h)}},y=()=>{o.addTask("modal",{modal:!1})};return W(l,m=>{t.value=m}),W(s,m=>{i.tittle=m.title||"",i.instructions=m.instructions||""},{deep:!0}),W(i,m=>{console.log("form",m),r.value=!!(m.video||m.audio)}),(m,h)=>{const x=qe,b=Ye,_=it,w=rt,C=Eo;return d(),g("form",{onSubmit:Wa(f,["prevent"])},[ye(p("h3",zo," Main Video: ",512),[[we,O(t)==="Video"]]),ye(p("h3",Mo," Audio track: ",512),[[we,O(t)==="Audio"]]),ye(S(x,{fileType:"video",icon:"true",onFileSelected:h[0]||(h[0]=$=>O(i).video=$)},null,512),[[we,O(t)==="Video"]]),ye(S(x,{fileType:"audio",icon:"true",onFileSelected:h[1]||(h[1]=$=>O(i).audio=$)},null,512),[[we,O(t)==="Audio"]]),S(b,{type:"text_area",title:"Add subtitles:",size:"lg","container-class":"py-2","onUpdate:modelValue":h[2]||(h[2]=$=>O(t)==="Video"?O(i).video_transcription=$:O(i).audio_transcription=$)}),O(t)==="Video"?(d(),g(U,{key:0},[h[4]||(h[4]=p("h3",{class:"text-s font-bold text-tarawera-700 my-4"},"Background image:",-1)),S(x,{fileType:"image",icon:"true",onFileSelected:h[3]||(h[3]=$=>O(i).image=$)})],64)):E("",!0),p("div",Do,[h[5]||(h[5]=p("p",null,"Include the stats",-1)),S(_)]),S(w,{onHandleSave:f,onHandleCancel:y,isActive:O(r)},null,8,["isActive"]),O(u)?(d(),N(C,{key:1,animation:"carousel",class:"mt-4",ui:{color:"freshGreen"}})):E("",!0)],32)}}});function Be(e,t){return{class_id:e,content_type:t,tittle:"",instructions:"",stats:!1}}function kt(){const e=_t(),t=sa();return ua({mutationFn:async o=>{try{const s=await xt.post(wt.classContent,o,{headers:{"Content-Type":"multipart/form-data",Accept:"application/json"}});return console.log("response",s.data),s.data}catch(s){throw console.error("API Error:",s),s}},onMutate:async o=>{const s=t.params.classId;await e.cancelQueries({queryKey:["class-contents",s]});const l=e.getQueryData(["class-contents",s]);return l&&e.setQueryData(["class-contents",s],r=>Array.isArray(r)?(r.length,[...r,o]):[r]),{previousContents:l}},onError:(o,s,l)=>{e.setQueryData(["class-contents",t.params.classId],l==null?void 0:l.previousContents)},onSettled:()=>{e.invalidateQueries(["class-contents",t.params.classId])},onSuccess:o=>{}})}const Bo={class:"flex items-center py-4"},Vo=["onClick"],Po=P({__name:"InfoBox",props:{modelValue:{}},emits:["update:modelValue"],setup(e){const t=[{value:"attention",label:"Attention"},{value:"grammar",label:"Grammar"},{value:"tip",label:"Tip"}],a=n=>n==="attention"?"border-tarawera-950 rounded-l-md":n==="grammar"?"border-t border-b border-tarawera-950":n==="tip"?"border-blue-500 rounded-r-md":"";return(n,o)=>(d(),g("div",Bo,[(d(),g(U,null,J(t,s=>p("button",{key:s.value,class:L(["px-4 py-2 border transition-colors",[n.modelValue===s.value?"bg-primary-color text-white":"bg-white text-primary-color",a(s.value)]]),onClick:l=>n.$emit("update:modelValue",s.value)},M(s.label),11,Vo)),64))]))}}),No={class:"flex items-center gap-2 py-4 text-sm"},_a=P({__name:"TextBlockModules",setup(e){const t=Oe(),a=ot(),n=kt(),o=j(()=>t.getTask("taskTitle")),s=D("info_box"),l=D(!1),r=j(()=>t.getTask("instructions")),i=D({...Be(String(a.params.classId),o.value),content_details:o.value==="Plain Text"?[{text:"",columns:1}]:[{info_type:"attention"}]});W(r,f=>{f&&(i.value={...i.value,tittle:f.title||"",instructions:f.instructions||""},s.value==="info_box"?l.value=!0:l.value=!1)},{deep:!0,immediate:!0}),W(o,f=>{s.value=f==="Plain Text"?"text_block":"info_box",i.value={...Be(String(a.params.classId),s.value),content_details:s.value==="text_block"?[{text:"",columns:1}]:[{info_type:"attention"}]}}),W(i,f=>{console.log("Task Data:",JSON.parse(JSON.stringify(f)))},{deep:!0}),W(i.value.content_details,f=>{f[0].text!=""?l.value=!0:l.value=!1});const c=async()=>{try{const f={class_id:String(a.params.classId),content_type:s.value.toLowerCase().replace(" ","_"),content_details:JSON.stringify(i.value.content_details),tittle:i.value.tittle,instructions:i.value.instructions,stats:i.value.stats};await n.mutateAsync(f),u()}catch(f){console.error("Error saving task:",f)}},u=()=>{t.addTask("modal",{modal:!1}),i.value={...Be(String(a.params.classId),s.value),content_details:[{text:"",columns:1}]}};return(f,y)=>{const m=Ye,h=it,x=rt;return d(),g("div",null,[s.value=="text_block"?(d(),g(U,{key:0},[y[4]||(y[4]=p("h3",{class:"text-s font-bold text-tarawera-700 mt-4"},"Text:",-1)),S(m,{type:"text_area",size:"xl","container-class":"py-2","onUpdate:modelValue":y[0]||(y[0]=b=>i.value.content_details[0].text=b)})],64)):s.value=="info_box"?(d(),N(Po,{key:1,modelValue:i.value.content_details[0].info_type,"onUpdate:modelValue":y[1]||(y[1]=b=>i.value.content_details[0].info_type=b),type:i.value.content_details[0].info_type},null,8,["modelValue","type"])):E("",!0),p("div",No,[y[5]||(y[5]=p("p",null,"Include the stats",-1)),S(h,{modelValue:i.value.stats,"onUpdate:modelValue":y[2]||(y[2]=b=>i.value.stats=b)},null,8,["modelValue"])]),S(x,{onHandleSave:y[3]||(y[3]=b=>c()),onHandleCancel:u,isActive:l.value},null,8,["isActive"])])}}}),Lo={};function Uo(e,t){const a=_a,n=st;return d(),N(n,null,{default:ce(()=>[S(a)]),_:1})}const Fo=ze(Lo,[["render",Uo]]),Ho={};function Ro(e,t){const a=ba,n=st;return d(),N(n,null,{default:ce(()=>[S(a)]),_:1})}const Wo=ze(Ho,[["render",Ro]]),qo={class:"shadow-md shadow-fuscous-gray-300 rounded-lg p-2 flex items-center justify-between"},Qo={class:"flex flex-col justify-between items-center"},Ko={class:"shadow-md shadow-fuscous-gray-300 rounded-lg p-4"},Yo={class:"flex items-center justify-between"},Go={class:"flex flex-col justify-between items-center"},Xo=P({__name:"UploadImage",setup(e){const t=Oe(),a=D({image:null,audio:null});return W(a,n=>{console.log("newValue",n),t.addTask("files",{image:n.image,audio:n.audio})},{deep:!0}),(n,o)=>(d(),g(U,null,[p("div",qo,[S(qe,{fileType:"image",icon:"true",title:"Main image:",onFileSelected:o[0]||(o[0]=s=>O(a).image=s)}),p("div",Qo,[S(Ue,{type:"crop"}),S(Ue,{type:"swap"}),S(Ue,{type:"delete"})])]),p("div",Ko,[p("div",Yo,[S(qe,{fileType:"audio",icon:"true",title:"Auio file:",onFileSelected:o[1]||(o[1]=s=>O(a).audio=s)}),p("div",Go,[S(Ue,{type:"swap"}),S(Ue,{type:"delete"})])]),$e(n.$slots,"default")])],64))}}),pt=Ke(re.ui.strategy,re.ui.kbd,Cn),Jo=P({inheritAttrs:!1,props:{value:{type:String,default:null},size:{type:String,default:()=>pt.default.size,validator(e){return Object.keys(pt.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:t,attrs:a}=Ge("kbd",Te(e,"ui"),pt),n=j(()=>bt(ae(t.value.base,t.value.size[e.size],t.value.padding,t.value.rounded,t.value.font,t.value.background,t.value.ring),e.class));return{ui:t,attrs:a,kbdClass:n}}});function Zo(e,t,a,n,o,s){return d(),g("kbd",ke({class:e.kbdClass},e.attrs),[$e(e.$slots,"default",{},()=>[he(M(e.value),1)])],16)}const xa=ze(Jo,[["render",Zo]]);function ie(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ee(e){var t=ie(e).Element;return e instanceof t||e instanceof Element}function ue(e){var t=ie(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function $t(e){if(typeof ShadowRoot>"u")return!1;var t=ie(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}var je=Math.max,nt=Math.min,Ve=Math.round;function gt(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function wa(){return!/^((?!chrome|android).)*safari/i.test(gt())}function Pe(e,t,a){t===void 0&&(t=!1),a===void 0&&(a=!1);var n=e.getBoundingClientRect(),o=1,s=1;t&&ue(e)&&(o=e.offsetWidth>0&&Ve(n.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Ve(n.height)/e.offsetHeight||1);var l=Ee(e)?ie(e):window,r=l.visualViewport,i=!wa()&&a,c=(n.left+(i&&r?r.offsetLeft:0))/o,u=(n.top+(i&&r?r.offsetTop:0))/s,f=n.width/o,y=n.height/s;return{width:f,height:y,top:u,right:c+f,bottom:u+y,left:c,x:c,y:u}}function Tt(e){var t=ie(e),a=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:a,scrollTop:n}}function es(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function ts(e){return e===ie(e)||!ue(e)?Tt(e):es(e)}function ge(e){return e?(e.nodeName||"").toLowerCase():null}function Se(e){return((Ee(e)?e.ownerDocument:e.document)||window.document).documentElement}function Ct(e){return Pe(Se(e)).left+Tt(e).scrollLeft}function be(e){return ie(e).getComputedStyle(e)}function Ot(e){var t=be(e),a=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(a+o+n)}function as(e){var t=e.getBoundingClientRect(),a=Ve(t.width)/e.offsetWidth||1,n=Ve(t.height)/e.offsetHeight||1;return a!==1||n!==1}function ns(e,t,a){a===void 0&&(a=!1);var n=ue(t),o=ue(t)&&as(t),s=Se(t),l=Pe(e,o,a),r={scrollLeft:0,scrollTop:0},i={x:0,y:0};return(n||!n&&!a)&&((ge(t)!=="body"||Ot(s))&&(r=ts(t)),ue(t)?(i=Pe(t,!0),i.x+=t.clientLeft,i.y+=t.clientTop):s&&(i.x=Ct(s))),{x:l.left+r.scrollLeft-i.x,y:l.top+r.scrollTop-i.y,width:l.width,height:l.height}}function St(e){var t=Pe(e),a=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-a)<=1&&(a=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:a,height:n}}function lt(e){return ge(e)==="html"?e:e.assignedSlot||e.parentNode||($t(e)?e.host:null)||Se(e)}function ka(e){return["html","body","#document"].indexOf(ge(e))>=0?e.ownerDocument.body:ue(e)&&Ot(e)?e:ka(lt(e))}function He(e,t){var a;t===void 0&&(t=[]);var n=ka(e),o=n===((a=e.ownerDocument)==null?void 0:a.body),s=ie(n),l=o?[s].concat(s.visualViewport||[],Ot(n)?n:[]):n,r=t.concat(l);return o?r:r.concat(He(lt(l)))}function os(e){return["table","td","th"].indexOf(ge(e))>=0}function Qt(e){return!ue(e)||be(e).position==="fixed"?null:e.offsetParent}function ss(e){var t=/firefox/i.test(gt()),a=/Trident/i.test(gt());if(a&&ue(e)){var n=be(e);if(n.position==="fixed")return null}var o=lt(e);for($t(o)&&(o=o.host);ue(o)&&["html","body"].indexOf(ge(o))<0;){var s=be(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Xe(e){for(var t=ie(e),a=Qt(e);a&&os(a)&&be(a).position==="static";)a=Qt(a);return a&&(ge(a)==="html"||ge(a)==="body"&&be(a).position==="static")?t:a||ss(e)||t}var oe="top",pe="bottom",fe="right",se="left",At="auto",Je=[oe,pe,fe,se],Ne="start",Qe="end",rs="clippingParents",$a="viewport",Fe="popper",is="reference",Kt=Je.reduce(function(e,t){return e.concat([t+"-"+Ne,t+"-"+Qe])},[]),Ta=[].concat(Je,[At]).reduce(function(e,t){return e.concat([t,t+"-"+Ne,t+"-"+Qe])},[]),ls="beforeRead",us="read",cs="afterRead",ds="beforeMain",ps="main",fs="afterMain",vs="beforeWrite",ms="write",gs="afterWrite",ys=[ls,us,cs,ds,ps,fs,vs,ms,gs];function hs(e){var t=new Map,a=new Set,n=[];e.forEach(function(s){t.set(s.name,s)});function o(s){a.add(s.name);var l=[].concat(s.requires||[],s.requiresIfExists||[]);l.forEach(function(r){if(!a.has(r)){var i=t.get(r);i&&o(i)}}),n.push(s)}return e.forEach(function(s){a.has(s.name)||o(s)}),n}function bs(e){var t=hs(e);return ys.reduce(function(a,n){return a.concat(t.filter(function(o){return o.phase===n}))},[])}function _s(e){var t;return function(){return t||(t=new Promise(function(a){Promise.resolve().then(function(){t=void 0,a(e())})})),t}}function xs(e){var t=e.reduce(function(a,n){var o=a[n.name];return a[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,a},{});return Object.keys(t).map(function(a){return t[a]})}function ws(e,t){var a=ie(e),n=Se(e),o=a.visualViewport,s=n.clientWidth,l=n.clientHeight,r=0,i=0;if(o){s=o.width,l=o.height;var c=wa();(c||!c&&t==="fixed")&&(r=o.offsetLeft,i=o.offsetTop)}return{width:s,height:l,x:r+Ct(e),y:i}}function ks(e){var t,a=Se(e),n=Tt(e),o=(t=e.ownerDocument)==null?void 0:t.body,s=je(a.scrollWidth,a.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=je(a.scrollHeight,a.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),r=-n.scrollLeft+Ct(e),i=-n.scrollTop;return be(o||a).direction==="rtl"&&(r+=je(a.clientWidth,o?o.clientWidth:0)-s),{width:s,height:l,x:r,y:i}}function Ca(e,t){var a=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(a&&$t(a)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function yt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function $s(e,t){var a=Pe(e,!1,t==="fixed");return a.top=a.top+e.clientTop,a.left=a.left+e.clientLeft,a.bottom=a.top+e.clientHeight,a.right=a.left+e.clientWidth,a.width=e.clientWidth,a.height=e.clientHeight,a.x=a.left,a.y=a.top,a}function Yt(e,t,a){return t===$a?yt(ws(e,a)):Ee(t)?$s(t,a):yt(ks(Se(e)))}function Ts(e){var t=He(lt(e)),a=["absolute","fixed"].indexOf(be(e).position)>=0,n=a&&ue(e)?Xe(e):e;return Ee(n)?t.filter(function(o){return Ee(o)&&Ca(o,n)&&ge(o)!=="body"}):[]}function Cs(e,t,a,n){var o=t==="clippingParents"?Ts(e):[].concat(t),s=[].concat(o,[a]),l=s[0],r=s.reduce(function(i,c){var u=Yt(e,c,n);return i.top=je(u.top,i.top),i.right=nt(u.right,i.right),i.bottom=nt(u.bottom,i.bottom),i.left=je(u.left,i.left),i},Yt(e,l,n));return r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}function me(e){return e.split("-")[0]}function Le(e){return e.split("-")[1]}function It(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Oa(e){var t=e.reference,a=e.element,n=e.placement,o=n?me(n):null,s=n?Le(n):null,l=t.x+t.width/2-a.width/2,r=t.y+t.height/2-a.height/2,i;switch(o){case oe:i={x:l,y:t.y-a.height};break;case pe:i={x:l,y:t.y+t.height};break;case fe:i={x:t.x+t.width,y:r};break;case se:i={x:t.x-a.width,y:r};break;default:i={x:t.x,y:t.y}}var c=o?It(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Ne:i[c]=i[c]-(t[u]/2-a[u]/2);break;case Qe:i[c]=i[c]+(t[u]/2-a[u]/2);break}}return i}function Sa(){return{top:0,right:0,bottom:0,left:0}}function Aa(e){return Object.assign({},Sa(),e)}function Ia(e,t){return t.reduce(function(a,n){return a[n]=e,a},{})}function jt(e,t){t===void 0&&(t={});var a=t,n=a.placement,o=n===void 0?e.placement:n,s=a.strategy,l=s===void 0?e.strategy:s,r=a.boundary,i=r===void 0?rs:r,c=a.rootBoundary,u=c===void 0?$a:c,f=a.elementContext,y=f===void 0?Fe:f,m=a.altBoundary,h=m===void 0?!1:m,x=a.padding,b=x===void 0?0:x,_=Aa(typeof b!="number"?b:Ia(b,Je)),w=y===Fe?is:Fe,C=e.rects.popper,$=e.elements[h?w:y],I=Cs(Ee($)?$:$.contextElement||Se(e.elements.popper),i,u,l),z=Pe(e.elements.reference),k=Oa({reference:z,element:C,strategy:"absolute",placement:o}),H=yt(Object.assign({},C,k)),R=y===Fe?H:z,F={top:I.top-R.top+_.top,bottom:R.bottom-I.bottom+_.bottom,left:I.left-R.left+_.left,right:R.right-I.right+_.right},Q=e.modifiersData.offset;if(y===Fe&&Q){var B=Q[o];Object.keys(F).forEach(function(V){var X=[fe,pe].indexOf(V)>=0?1:-1,te=[oe,pe].indexOf(V)>=0?"y":"x";F[V]+=B[te]*X})}return F}var Gt={placement:"bottom",modifiers:[],strategy:"absolute"};function Xt(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function Os(e){e===void 0&&(e={});var t=e,a=t.defaultModifiers,n=a===void 0?[]:a,o=t.defaultOptions,s=o===void 0?Gt:o;return function(r,i,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Gt,s),modifiersData:{},elements:{reference:r,popper:i},attributes:{},styles:{}},f=[],y=!1,m={state:u,setOptions:function(_){var w=typeof _=="function"?_(u.options):_;x(),u.options=Object.assign({},s,u.options,w),u.scrollParents={reference:Ee(r)?He(r):r.contextElement?He(r.contextElement):[],popper:He(i)};var C=bs(xs([].concat(n,u.options.modifiers)));return u.orderedModifiers=C.filter(function($){return $.enabled}),h(),m.update()},forceUpdate:function(){if(!y){var _=u.elements,w=_.reference,C=_.popper;if(Xt(w,C)){u.rects={reference:ns(w,Xe(C),u.options.strategy==="fixed"),popper:St(C)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(F){return u.modifiersData[F.name]=Object.assign({},F.data)});for(var $=0;$<u.orderedModifiers.length;$++){if(u.reset===!0){u.reset=!1,$=-1;continue}var I=u.orderedModifiers[$],z=I.fn,k=I.options,H=k===void 0?{}:k,R=I.name;typeof z=="function"&&(u=z({state:u,options:H,name:R,instance:m})||u)}}}},update:_s(function(){return new Promise(function(b){m.forceUpdate(),b(u)})}),destroy:function(){x(),y=!0}};if(!Xt(r,i))return m;m.setOptions(c).then(function(b){!y&&c.onFirstUpdate&&c.onFirstUpdate(b)});function h(){u.orderedModifiers.forEach(function(b){var _=b.name,w=b.options,C=w===void 0?{}:w,$=b.effect;if(typeof $=="function"){var I=$({state:u,name:_,instance:m,options:C}),z=function(){};f.push(I||z)}})}function x(){f.forEach(function(b){return b()}),f=[]}return m}}var et={passive:!0};function Ss(e){var t=e.state,a=e.instance,n=e.options,o=n.scroll,s=o===void 0?!0:o,l=n.resize,r=l===void 0?!0:l,i=ie(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",a.update,et)}),r&&i.addEventListener("resize",a.update,et),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",a.update,et)}),r&&i.removeEventListener("resize",a.update,et)}}const ja={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ss,data:{}};function As(e){var t=e.state,a=e.name;t.modifiersData[a]=Oa({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Is={name:"popperOffsets",enabled:!0,phase:"read",fn:As,data:{}};var js={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Es(e,t){var a=e.x,n=e.y,o=t.devicePixelRatio||1;return{x:Ve(a*o)/o||0,y:Ve(n*o)/o||0}}function Jt(e){var t,a=e.popper,n=e.popperRect,o=e.placement,s=e.variation,l=e.offsets,r=e.position,i=e.gpuAcceleration,c=e.adaptive,u=e.roundOffsets,f=e.isFixed,y=l.x,m=y===void 0?0:y,h=l.y,x=h===void 0?0:h,b=typeof u=="function"?u({x:m,y:x}):{x:m,y:x};m=b.x,x=b.y;var _=l.hasOwnProperty("x"),w=l.hasOwnProperty("y"),C=se,$=oe,I=window;if(c){var z=Xe(a),k="clientHeight",H="clientWidth";if(z===ie(a)&&(z=Se(a),be(z).position!=="static"&&r==="absolute"&&(k="scrollHeight",H="scrollWidth")),z=z,o===oe||(o===se||o===fe)&&s===Qe){$=pe;var R=f&&z===I&&I.visualViewport?I.visualViewport.height:z[k];x-=R-n.height,x*=i?1:-1}if(o===se||(o===oe||o===pe)&&s===Qe){C=fe;var F=f&&z===I&&I.visualViewport?I.visualViewport.width:z[H];m-=F-n.width,m*=i?1:-1}}var Q=Object.assign({position:r},c&&js),B=u===!0?Es({x:m,y:x},ie(a)):{x:m,y:x};if(m=B.x,x=B.y,i){var V;return Object.assign({},Q,(V={},V[$]=w?"0":"",V[C]=_?"0":"",V.transform=(I.devicePixelRatio||1)<=1?"translate("+m+"px, "+x+"px)":"translate3d("+m+"px, "+x+"px, 0)",V))}return Object.assign({},Q,(t={},t[$]=w?x+"px":"",t[C]=_?m+"px":"",t.transform="",t))}function zs(e){var t=e.state,a=e.options,n=a.gpuAcceleration,o=n===void 0?!0:n,s=a.adaptive,l=s===void 0?!0:s,r=a.roundOffsets,i=r===void 0?!0:r,c={placement:me(t.placement),variation:Le(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Jt(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:i})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Jt(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:i})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const Ea={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:zs,data:{}};function Ms(e){var t=e.state;Object.keys(t.elements).forEach(function(a){var n=t.styles[a]||{},o=t.attributes[a]||{},s=t.elements[a];!ue(s)||!ge(s)||(Object.assign(s.style,n),Object.keys(o).forEach(function(l){var r=o[l];r===!1?s.removeAttribute(l):s.setAttribute(l,r===!0?"":r)}))})}function Ds(e){var t=e.state,a={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,a.popper),t.styles=a,t.elements.arrow&&Object.assign(t.elements.arrow.style,a.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],s=t.attributes[n]||{},l=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:a[n]),r=l.reduce(function(i,c){return i[c]="",i},{});!ue(o)||!ge(o)||(Object.assign(o.style,r),Object.keys(s).forEach(function(i){o.removeAttribute(i)}))})}}const Bs={name:"applyStyles",enabled:!0,phase:"write",fn:Ms,effect:Ds,requires:["computeStyles"]};var Vs=[ja,Is,Ea,Bs],Ps={left:"right",right:"left",bottom:"top",top:"bottom"};function at(e){return e.replace(/left|right|bottom|top/g,function(t){return Ps[t]})}var Ns={start:"end",end:"start"};function Zt(e){return e.replace(/start|end/g,function(t){return Ns[t]})}function Ls(e,t){t===void 0&&(t={});var a=t,n=a.placement,o=a.boundary,s=a.rootBoundary,l=a.padding,r=a.flipVariations,i=a.allowedAutoPlacements,c=i===void 0?Ta:i,u=Le(n),f=u?r?Kt:Kt.filter(function(h){return Le(h)===u}):Je,y=f.filter(function(h){return c.indexOf(h)>=0});y.length===0&&(y=f);var m=y.reduce(function(h,x){return h[x]=jt(e,{placement:x,boundary:o,rootBoundary:s,padding:l})[me(x)],h},{});return Object.keys(m).sort(function(h,x){return m[h]-m[x]})}function Us(e){if(me(e)===At)return[];var t=at(e);return[Zt(e),t,Zt(t)]}function Fs(e){var t=e.state,a=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=a.mainAxis,s=o===void 0?!0:o,l=a.altAxis,r=l===void 0?!0:l,i=a.fallbackPlacements,c=a.padding,u=a.boundary,f=a.rootBoundary,y=a.altBoundary,m=a.flipVariations,h=m===void 0?!0:m,x=a.allowedAutoPlacements,b=t.options.placement,_=me(b),w=_===b,C=i||(w||!h?[at(b)]:Us(b)),$=[b].concat(C).reduce(function(Z,q){return Z.concat(me(q)===At?Ls(t,{placement:q,boundary:u,rootBoundary:f,padding:c,flipVariations:h,allowedAutoPlacements:x}):q)},[]),I=t.rects.reference,z=t.rects.popper,k=new Map,H=!0,R=$[0],F=0;F<$.length;F++){var Q=$[F],B=me(Q),V=Le(Q)===Ne,X=[oe,pe].indexOf(B)>=0,te=X?"width":"height",Y=jt(t,{placement:Q,boundary:u,rootBoundary:f,altBoundary:y,padding:c}),v=X?V?fe:se:V?pe:oe;I[te]>z[te]&&(v=at(v));var T=at(v),A=[];if(s&&A.push(Y[B]<=0),r&&A.push(Y[v]<=0,Y[T]<=0),A.every(function(Z){return Z})){R=Q,H=!1;break}k.set(Q,A)}if(H)for(var K=h?3:1,de=function(q){var G=$.find(function(ve){var ee=k.get(ve);if(ee)return ee.slice(0,q).every(function(_e){return _e})});if(G)return R=G,"break"},ne=K;ne>0;ne--){var le=de(ne);if(le==="break")break}t.placement!==R&&(t.modifiersData[n]._skip=!0,t.placement=R,t.reset=!0)}}const Hs={name:"flip",enabled:!0,phase:"main",fn:Fs,requiresIfExists:["offset"],data:{_skip:!1}};function Rs(e,t,a){var n=me(e),o=[se,oe].indexOf(n)>=0?-1:1,s=typeof a=="function"?a(Object.assign({},t,{placement:e})):a,l=s[0],r=s[1];return l=l||0,r=(r||0)*o,[se,fe].indexOf(n)>=0?{x:r,y:l}:{x:l,y:r}}function Ws(e){var t=e.state,a=e.options,n=e.name,o=a.offset,s=o===void 0?[0,0]:o,l=Ta.reduce(function(u,f){return u[f]=Rs(f,t.rects,s),u},{}),r=l[t.placement],i=r.x,c=r.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=i,t.modifiersData.popperOffsets.y+=c),t.modifiersData[n]=l}const qs={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ws};function Qs(e){return e==="x"?"y":"x"}function Re(e,t,a){return je(e,nt(t,a))}function Ks(e,t,a){var n=Re(e,t,a);return n>a?a:n}function Ys(e){var t=e.state,a=e.options,n=e.name,o=a.mainAxis,s=o===void 0?!0:o,l=a.altAxis,r=l===void 0?!1:l,i=a.boundary,c=a.rootBoundary,u=a.altBoundary,f=a.padding,y=a.tether,m=y===void 0?!0:y,h=a.tetherOffset,x=h===void 0?0:h,b=jt(t,{boundary:i,rootBoundary:c,padding:f,altBoundary:u}),_=me(t.placement),w=Le(t.placement),C=!w,$=It(_),I=Qs($),z=t.modifiersData.popperOffsets,k=t.rects.reference,H=t.rects.popper,R=typeof x=="function"?x(Object.assign({},t.rects,{placement:t.placement})):x,F=typeof R=="number"?{mainAxis:R,altAxis:R}:Object.assign({mainAxis:0,altAxis:0},R),Q=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,B={x:0,y:0};if(z){if(s){var V,X=$==="y"?oe:se,te=$==="y"?pe:fe,Y=$==="y"?"height":"width",v=z[$],T=v+b[X],A=v-b[te],K=m?-H[Y]/2:0,de=w===Ne?k[Y]:H[Y],ne=w===Ne?-H[Y]:-k[Y],le=t.elements.arrow,Z=m&&le?St(le):{width:0,height:0},q=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Sa(),G=q[X],ve=q[te],ee=Re(0,k[Y],Z[Y]),_e=C?k[Y]/2-K-ee-G-F.mainAxis:de-ee-G-F.mainAxis,Ma=C?-k[Y]/2+K+ee+ve+F.mainAxis:ne+ee+ve+F.mainAxis,ut=t.elements.arrow&&Xe(t.elements.arrow),Da=ut?$==="y"?ut.clientTop||0:ut.clientLeft||0:0,Et=(V=Q==null?void 0:Q[$])!=null?V:0,Ba=v+_e-Et-Da,Va=v+Ma-Et,zt=Re(m?nt(T,Ba):T,v,m?je(A,Va):A);z[$]=zt,B[$]=zt-v}if(r){var Mt,Pa=$==="x"?oe:se,Na=$==="x"?pe:fe,Ae=z[I],Ze=I==="y"?"height":"width",Dt=Ae+b[Pa],Bt=Ae-b[Na],ct=[oe,se].indexOf(_)!==-1,Vt=(Mt=Q==null?void 0:Q[I])!=null?Mt:0,Pt=ct?Dt:Ae-k[Ze]-H[Ze]-Vt+F.altAxis,Nt=ct?Ae+k[Ze]+H[Ze]-Vt-F.altAxis:Bt,Lt=m&&ct?Ks(Pt,Ae,Nt):Re(m?Pt:Dt,Ae,m?Nt:Bt);z[I]=Lt,B[I]=Lt-Ae}t.modifiersData[n]=B}}const Gs={name:"preventOverflow",enabled:!0,phase:"main",fn:Ys,requiresIfExists:["offset"]};var Xs=function(t,a){return t=typeof t=="function"?t(Object.assign({},a.rects,{placement:a.placement})):t,Aa(typeof t!="number"?t:Ia(t,Je))};function Js(e){var t,a=e.state,n=e.name,o=e.options,s=a.elements.arrow,l=a.modifiersData.popperOffsets,r=me(a.placement),i=It(r),c=[se,fe].indexOf(r)>=0,u=c?"height":"width";if(!(!s||!l)){var f=Xs(o.padding,a),y=St(s),m=i==="y"?oe:se,h=i==="y"?pe:fe,x=a.rects.reference[u]+a.rects.reference[i]-l[i]-a.rects.popper[u],b=l[i]-a.rects.reference[i],_=Xe(s),w=_?i==="y"?_.clientHeight||0:_.clientWidth||0:0,C=x/2-b/2,$=f[m],I=w-y[u]-f[h],z=w/2-y[u]/2+C,k=Re($,z,I),H=i;a.modifiersData[n]=(t={},t[H]=k,t.centerOffset=k-z,t)}}function Zs(e){var t=e.state,a=e.options,n=a.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||Ca(t.elements.popper,o)&&(t.elements.arrow=o))}const er={name:"arrow",enabled:!0,phase:"main",fn:Js,effect:Zs,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},tr=Os({defaultModifiers:[...Vs,qs,Hs,Gs,Ea,ja,er]});function ar({locked:e=!1,overflowPadding:t=8,offsetDistance:a=8,offsetSkid:n=0,gpuAcceleration:o=!0,adaptive:s=!0,scroll:l=!0,resize:r=!0,arrow:i=!1,placement:c,strategy:u},f){const y=D(null),m=D(null),h=D(null);return We(()=>{na(x=>{if(!m.value||!y.value&&!(f!=null&&f.value))return;const b=Ut(m),_=Ut(y);if(!(b instanceof HTMLElement)||!_)return;const w={modifiers:[{name:"flip",enabled:!e},{name:"preventOverflow",options:{padding:t}},{name:"offset",options:{offset:[n,a]}},{name:"computeStyles",options:{adaptive:s,gpuAcceleration:o}},{name:"eventListeners",options:{scroll:l,resize:r}},{name:"arrow",enabled:i}]};c&&(w.placement=c),u&&(w.strategy=u),h.value=tr(_,b,w),x(h.value.destroy)})}),[y,m,h]}const ft=Ke(re.ui.strategy,re.ui.tooltip,An),nr=P({components:{UKbd:xa},inheritAttrs:!1,props:{text:{type:String,default:null},prevent:{type:Boolean,default:!1},shortcuts:{type:Array,default:()=>[]},openDelay:{type:Number,default:()=>ft.default.openDelay},closeDelay:{type:Number,default:()=>ft.default.closeDelay},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:t,attrs:a}=Ge("tooltip",Te(e,"ui"),ft,Te(e,"class")),n=j(()=>ra({},e.popper,t.value.popper)),[o,s]=ar(n.value),l=D(!1);let r=null,i=null;const c=j(()=>!!(qa().text||e.text));function u(){i&&(clearTimeout(i),i=null),!l.value&&(r=r||setTimeout(()=>{l.value=!0,r=null},e.openDelay))}function f(){r&&(clearTimeout(r),r=null),l.value&&(i=i||setTimeout(()=>{l.value=!1,i=null},e.closeDelay))}return{ui:t,attrs:a,popper:n,trigger:o,container:s,open:l,onMouseEnter:u,onMouseLeave:f,isVisible:c}}});function or(e,t,a,n,o,s){const l=xa;return d(),g("div",ke({ref:"trigger",class:e.ui.wrapper},e.attrs,{onMouseenter:t[0]||(t[0]=(...r)=>e.onMouseEnter&&e.onMouseEnter(...r)),onMouseleave:t[1]||(t[1]=(...r)=>e.onMouseLeave&&e.onMouseLeave(...r))}),[$e(e.$slots,"default",{open:e.open},()=>[t[2]||(t[2]=he(" Hover "))]),e.open&&!e.prevent&&e.isVisible?(d(),g("div",{key:0,ref:"container",class:L([e.ui.container,e.ui.width])},[S(ht,ke({appear:""},e.ui.transition),{default:ce(()=>{var r;return[p("div",null,[e.popper.arrow?(d(),g("div",{key:0,"data-popper-arrow":"",class:L(Object.values(e.ui.arrow))},null,2)):E("",!0),p("div",{class:L([e.ui.base,e.ui.background,e.ui.color,e.ui.rounded,e.ui.shadow,e.ui.ring])},[$e(e.$slots,"text",{},()=>[he(M(e.text),1)]),(r=e.shortcuts)!=null&&r.length?(d(),g("span",{key:0,class:L(e.ui.shortcuts)},[p("span",{class:L(e.ui.middot)},"·",2),(d(!0),g(U,null,J(e.shortcuts,i=>(d(),N(l,{key:i,size:"xs"},{default:ce(()=>[he(M(i),1)]),_:2},1024))),128))],2)):E("",!0)],2)])]}),_:3},16)],2)):E("",!0)],16)}const sr=ze(nr,[["render",or]]),rr={class:"bg-gray-200 rounded-md p-1 flex items-center justify-center"},ir=P({__name:"Icon",props:{size:{},name:{}},emits:["handleClick"],setup(e){return(t,a)=>{const n=Ce;return d(),g("div",rr,[S(n,{name:t.name,size:t.size,class:"text-gray-500 cursor-pointer",onClick:a[0]||(a[0]=o=>t.$emit("handleClick"))},null,8,["name","size"])])}}}),lr={close:"material-symbols:close",info:"flat-color-icons:info",add:"icon-park-solid:add"},ur={class:"flex items-center gap-2 p-2"},cr=["id"],dr=["for"],pr={class:"peer-checked:block"},fr=P({__name:"InputTask",props:{answer:{},isCorrect:{type:[Boolean,String]},removeOption:{type:Function},qIndex:{},oIndex:{},type:{}},emits:["update:answer","update:isCorrect"],setup(e,{emit:t}){const a=t,n=D(e.isCorrect??!1);return W(n,o=>{console.log("Selected option:",o),a("update:isCorrect",o)}),(o,s)=>{const l=Ce,r=ca,i=qe;return d(),g("div",ur,[S(l,{name:"mingcute:dots-fill",size:"24",class:"text-gray-500"}),o.type==="checkbox"?ye((d(),g("input",{key:0,type:"checkbox",id:`checkbox-${o.qIndex}-${o.oIndex}`,"onUpdate:modelValue":s[0]||(s[0]=c=>n.value=c),class:"hidden peer"},null,8,cr)),[[Qa,n.value]]):E("",!0),o.type==="checkbox"?(d(),g("label",{key:1,for:`checkbox-${o.qIndex}-${o.oIndex}`,class:"w-6 h-6 border-2 border-gray-300 rounded cursor-pointer peer-checked:bg-tarawera-700 peer-checked:border-tarawera-700 flex justify-center items-center"},[p("span",pr,[S(l,{name:"mingcute:check-2-fill",size:"24",class:"text-white flex items-center"})])],8,dr)):E("",!0),o.type==="select"?(d(),N(en,{key:2,title:"Answer",options:["True","False","Not stated"],label:!0,modelValue:n.value,"onUpdate:modelValue":s[1]||(s[1]=c=>n.value=c)},null,8,["modelValue"])):E("",!0),S(r,{"model-value":o.answer,"onUpdate:modelValue":s[2]||(s[2]=c=>a("update:answer",c)),type:"text",size:"xs",class:"w-full",disabled:!1},null,8,["model-value"]),o.type==="file"?(d(),N(i,{key:3,fileType:"image",icon:"true",title:"Image file:"})):E("",!0),S(ir,{name:O(lr).close,size:18,onClick:s[3]||(s[3]=c=>o.removeOption(o.qIndex,o.oIndex))},null,8,["name"])])}}}),xe=Ke(re.ui.strategy,re.ui.textarea,tn),vr=P({inheritAttrs:!1,props:{modelValue:{type:[String,Number],default:""},id:{type:String,default:null},name:{type:String,default:null},placeholder:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rows:{type:Number,default:3},maxrows:{type:Number,default:0},autoresize:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},autofocusDelay:{type:Number,default:100},resize:{type:Boolean,default:!1},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(xe.size).includes(e)}},color:{type:String,default:()=>xe.default.color,validator(e){return[...re.ui.colors,...Object.keys(xe.color)].includes(e)}},variant:{type:String,default:()=>xe.default.variant,validator(e){return[...Object.keys(xe.variant),...Object.values(xe.color).flatMap(t=>Object.keys(t))].includes(e)}},textareaClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},modelModifiers:{type:Object,default:()=>({})}},emits:["update:modelValue","blur","change"],setup(e,{emit:t}){const{ui:a,attrs:n}=Ge("textarea",Te(e,"ui"),xe,Te(e,"class")),{emitFormBlur:o,emitFormInput:s,inputId:l,color:r,size:i,name:c}=la(e,xe),u=D(ra({},e.modelModifiers,{trim:!1,lazy:!1,number:!1,nullify:!1})),f=D(null),y=()=>{var C;e.autofocus&&((C=f.value)==null||C.focus())},m=()=>{if(e.autoresize){if(!f.value)return;f.value.rows=e.rows;const C=f.value.style.overflow;f.value.style.overflow="hidden";const $=window.getComputedStyle(f.value),I=Number.parseInt($.paddingTop),z=Number.parseInt($.paddingBottom),k=I+z,H=Number.parseInt($.lineHeight),{scrollHeight:R}=f.value,F=(R-k)/H;F>e.rows&&(f.value.rows=e.maxrows?Math.min(F,e.maxrows):F),f.value.style.overflow=C}},h=C=>{u.value.trim&&(C=C.trim()),u.value.number&&(C=Ya(C)),u.value.nullify&&(C||(C=null)),t("update:modelValue",C),s()},x=C=>{m(),u.value.lazy||h(C.target.value)},b=C=>{const $=C.target.value;t("change",$),u.value.lazy&&h($),u.value.trim&&(C.target.value=$.trim())},_=C=>{t("blur",C),o()};We(()=>{setTimeout(()=>{y()},e.autofocusDelay)}),W(()=>e.modelValue,()=>{Ka(m)}),We(()=>{setTimeout(()=>{y(),m()},100)});const w=j(()=>{var $,I;const C=((I=($=a.value.color)==null?void 0:$[r.value])==null?void 0:I[e.variant])||a.value.variant[e.variant];return bt(ae(a.value.base,a.value.form,a.value.rounded,a.value.placeholder,a.value.size[i.value],e.padded?a.value.padding[i.value]:"p-0",C==null?void 0:C.replaceAll("{color}",r.value),!e.resize&&"resize-none"),e.textareaClass)});return{ui:a,attrs:n,name:c,inputId:l,textarea:f,textareaClass:w,onInput:x,onChange:b,onBlur:_}}}),mr=["id","value","name","rows","required","disabled","placeholder"];function gr(e,t,a,n,o,s){return d(),g("div",{class:L(e.ui.wrapper)},[p("textarea",ke({id:e.inputId,ref:"textarea",value:e.modelValue,name:e.name,rows:e.rows,required:e.required,disabled:e.disabled,placeholder:e.placeholder,class:e.textareaClass},e.attrs,{onInput:t[0]||(t[0]=(...l)=>e.onInput&&e.onInput(...l)),onBlur:t[1]||(t[1]=(...l)=>e.onBlur&&e.onBlur(...l)),onChange:t[2]||(t[2]=(...l)=>e.onChange&&e.onChange(...l))}),null,16,mr),$e(e.$slots,"default")],2)}const yr=ze(vr,[["render",gr]]),hr={class:"w-full"},br={class:"flex items-center gap-2"},_r={class:"text-xs p-2 text-fuscous-gray-950"},xr={class:"bg-tarawera-100 text-xs p-2 text-fuscous-gray-950 flex gap-2"},wr={key:0,class:"mt-2"},kr={class:"text-sm font-bold text-primary-color"},$r={class:"text-xs text-fuscous-gray-950"},Tr=P({__name:"TextAreaTask",props:{data:{},value:{}},emits:["update:value","update:extraValue"],setup(e,{emit:t}){const a=e,n=t,o=D(a.value),s=r=>{n("update:value",r)},l=r=>{const i=r.target;n("update:extraValue",i.value)};return(r,i)=>{const c=Ce,u=yr;return d(),g("div",hr,[p("div",br,[i[1]||(i[1]=p("p",{class:"text-xs p-2 text-fuscous-gray-950"},"Exercise text:",-1)),S(c,{name:"material-symbols:info-outline",size:"14",class:"bg-tarawera-700"})]),p("p",_r,M(r.data.instructions),1),p("div",xr,[(d(!0),g(U,null,J(r.data.description,(f,y)=>(d(),g("div",{key:y,class:"bg-white rounded-md p-2"},M(f),1))),128))]),S(u,{modelValue:O(o),"onUpdate:modelValue":[i[0]||(i[0]=f=>oa(o)?o.value=f:null),s],class:"text-xs mt-2"},null,8,["modelValue"]),r.data.extra?(d(),g("div",wr,[p("p",kr,M(r.data.extra.subtitle),1),p("p",$r,M(r.data.extra.description),1),p("input",{type:"text",class:"text-xs mt-2 w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-tarawera-500",onInput:l},null,32)])):E("",!0)])}}}),Cr=e=>({removeOption:(n,o)=>{const s=JSON.parse(JSON.stringify(e.value));s[n].answers.splice(o,1),e.value=s},removeQuestion:n=>{e.value.splice(n,1)}}),Or=()=>({getType:t=>{switch(t){case"sorting":return"file";case"multiple_choice":return"checkbox";case"true_false":return"select";case"category":return"text";case"ordering":return"text";default:return}}}),Sr={key:0,class:"flex flex-col items-center justify-center p-4"},Ar=["onDragstart","onDrop"],Ir={class:"mt-4"},jr={class:"text-tarawera-700 font-bold"},Er={key:0,class:"flex items-center gap-2 p-2"},zr={class:"bg-gray-200 rounded-md p-1 flex items-center justify-center"},Mr={class:"flex justify-end w-full"},Dr={class:"w-[95%] items-end"},Br=["onClick"],Vr=["disabled"],Pr={class:"flex items-center gap-2 py-4 text-sm"},De=P({__name:"MultipleTasks",props:{typeTask:{},titleTask:{},subtitleTask:{},description:{},inputTitleTask:{type:Boolean}},emits:["update:value","save-task"],setup(e,{emit:t}){const a=Oe(),n=sa(),o=j(()=>a.getTask("instructions")),s=j(()=>a.getTask("files")),l=j(()=>a.getTask("select")),r=j(()=>a.getTask("taskTitle")),i=D(""),c=D(!1),u=D(""),{getType:f}=Or(),{mutateAsync:y,isLoading:m,isSuccess:h,isError:x}=kt(),b=D({isActive:!1,isLoading:j(()=>m),isSuccess:j(()=>h),isError:j(()=>x),error:null,data:null}),_=D([{question:"",statement:"",stated:"True",text:"",indice:0,answers:[{text:"",isCorrect:!1}],typeTask:e.titleTask}]),{removeOption:w,removeQuestion:C}=Cr(_),{onDragStart:$,onDragOver:I,onDrop:z}=on(_),k=D({...Be(n.params.classId,e.typeTask),content_details:{questions:[],passages:[],categories:[],ordering:[],word_bank:[]},image:null,audio:null,video_transcription:null,audio_transcription:""});W(l,v=>{console.log("select",v)},{deep:!0}),W(_,v=>{c.value=X(),b.value.isActive=X(),e.typeTask==="ordering"&&(k.value.content_details.ordering=v.map((T,A)=>({text:T.question,indice:A+1}))),e.typeTask==="category"&&(k.value.content_details.categories=v.map(T=>({question:T.text,text_items:T.answers.map(A=>({text:A.text}))}))),e.typeTask==="true_false"?k.value.content_details.questions=v.map(T=>{var A,K;return{statement:T.statement||((A=T.answers[0])==null?void 0:A.text)||"",stated:T.stated||((K=T.answers[0])==null?void 0:K.isCorrect)||""}}):k.value.content_details.questions=v.map(T=>({question:T.question,answers:T.answers.map(A=>({text:A.text,isCorrect:A.isCorrect}))}))},{deep:!0}),W(s,v=>{v.audio&&(k.value.audio=v.audio),v.image&&(k.value.image=v.image)},{deep:!0}),W(o,v=>{v&&Object.assign(k.value,{tittle:v.title||"",instructions:v.instructions||""})},{deep:!0}),W(k,v=>{console.log("newValue",v)},{deep:!0}),W(()=>e.typeTask,v=>{console.log("typeTask changed:",v)},{immediate:!0});const H=v=>{_.value[v].answers.push({text:"",isCorrect:!1})},R=v=>{const T=v.split("/").map(A=>A.trim()).filter(A=>A);u.value=T.join("/"),k.value.content_details.word_bank.length>0&&(k.value.content_details.word_bank[0].extraWords=T)},F=v=>{if(i.value=v,c.value=v.trim()!=="",b.value.isActive=v.trim()!=="",r.value=="word_bank"){const T=v.match(/\[(.*?)\]/g);let A=v;const K=[];T&&T.forEach((de,ne)=>{const le=de.slice(1,-1).trim();K.push({word:le,position:ne+1}),A=A.replace(de,`__${ne+1}__`)}),k.value.content_details.word_bank=[{text:A,keywords:K,extraWords:u.value?u.value.split(",").map(de=>de.trim()):[]}]}if(r.value=="fill_gaps"){const A=v.split(`
`).map((K,de)=>{const ne=K.match(/\[(.*?)\]/g);let le=K;const Z=[];return ne&&ne.forEach((q,G)=>{q.slice(1,-1).split("/").forEach(ee=>{const _e=ee.replace("*","").trim();_e&&Z.push(_e)}),le=le.replace(q,`__${G+1}__`)}),{text:le,keywords:Z,help_text:!1}});k.value.content_details.passages=A}},Q=()=>{_.value.push({question:"",answers:[{text:"",isCorrect:""}],typeTask:e.typeTask})},B=(v,T,A)=>{e.typeTask==="ordering"?(console.log(A),_.value[v].text=A):e.typeTask==="true_false"?_.value[v].statement=A:_.value[v].answers[T].text=A},V=(v,T,A)=>{e.typeTask==="true_false"?_.value[v].stated=A:_.value[v].answers[T].isCorrect=A},X=()=>_.value.every(v=>{var T,A;return e.typeTask==="true_false"?(console.log("aqui"),((T=v.statement)==null?void 0:T.trim())!==""):e.typeTask==="ordering"?((A=v.text)==null?void 0:A.trim())!=="":v.question.trim()===""?!1:v.answers.every(K=>K.text.trim()!=="")}),te=async()=>{try{const v=new FormData;let T;k.value.content_type==="fill_gaps"?T={passages:k.value.content_details.passages}:k.value.content_type==="word_bank"?T={word_bank:k.value.content_details.word_bank}:T={questions:k.value.content_details.questions},k.value.image&&v.append("image",k.value.image),k.value.audio&&(v.append("audio",k.value.audio),v.append("audio_transcription",k.value.audio_transcription)),v.append("class_id",String(k.value.class_id)),v.append("content_type",k.value.content_type),v.append("tittle",k.value.tittle),v.append("instructions",k.value.instructions),v.append("content_details",JSON.stringify(T)),v.append("stats",String(k.value.stats)),console.log("Sending data:",{class_id:k.value.class_id,content_type:k.value.content_type,tittle:k.value.tittle,instructions:k.value.instructions,content_details:T,stats:k.value.stats}),await y(v)}catch(v){throw console.error("Error preparing data:",v),v}},Y=()=>{a.addTask("modal",{modal:!1})};return(v,T)=>{const A=Ce,K=ca,de=sr,ne=it,le=rt;return d(),g(U,null,[b.value.isLoading?(d(),g("div",Sr,T[3]||(T[3]=[p("p",{class:"mt-2 text-lg text-gray-700"},"Guardando...",-1)]))):E("",!0),v.typeTask==="text_area"?(d(),N(Tr,{key:1,value:i.value,data:v.description,"onUpdate:value":F,"onUpdate:extraValue":R},null,8,["value","data"])):(d(!0),g(U,{key:2},J(_.value,(Z,q)=>(d(),g("div",{key:q,class:"border-b border-gray-500 pb-4",draggable:!0,onDragstart:G=>O($)(G,q),onDragover:T[0]||(T[0]=(...G)=>O(I)&&O(I)(...G)),onDrop:G=>O(z)(G,q)},[p("div",Ir,[p("h3",jr,M(v.titleTask)+" "+M(q+1),1),p("div",null,[v.typeTask!=="true_false"&&v.typeTask!=="ordering"?(d(),g("div",Er,[S(A,{name:"mingcute:dots-fill",size:"24",class:"text-gray-500 cursor-grab"}),S(K,{modelValue:Z.question,"onUpdate:modelValue":G=>Z.question=G,type:"text",size:"xs",placeholder:"Enter your question",class:"w-full mt-1"},null,8,["modelValue","onUpdate:modelValue"]),p("div",zr,[S(A,{name:"material-symbols:close",size:"18",class:"text-gray-500 cursor-pointer",onClick:G=>O(C)(q)},null,8,["onClick"])])])):E("",!0)]),p("div",Mr,[p("div",Dr,[(d(!0),g(U,null,J(Z.answers,(G,ve)=>(d(),N(fr,{key:`${q}-${ve}`,qIndex:q,oIndex:ve,isCorrect:G.isCorrect,type:O(f)(v.typeTask),answer:G.text,removeOption:(ee,_e)=>O(w)(ee,_e),"onUpdate:isCorrect":ee=>V(q,ve,ee),"onUpdate:answer":ee=>B(q,ve,ee),placeholder:"Enter your answer"},null,8,["qIndex","oIndex","isCorrect","type","answer","removeOption","onUpdate:isCorrect","onUpdate:answer"]))),128)),v.typeTask!=="true_false"?(d(),g("button",{key:0,class:"bg-fuscous-gray-100 text-fuscous-gray-600 text-xs rounded-md flex items-center gap-2 px-2 py-1 mt-2",onClick:G=>H(q)},[S(A,{name:"icon-park-solid:add",size:"14",class:"bg-fuscous-gray-500"}),T[4]||(T[4]=he(" Add option "))],8,Br)):E("",!0)])])])],40,Ar))),128)),v.typeTask!=="text_area"?(d(),N(de,{key:3,text:c.value?"":"all questions and answers are required",ui:{container:" text-fuscous-gray-600 text-xs rounded-md flex items-center gap-2 px-2 py-1 mt-2"}},{default:ce(()=>[v.titleTask?(d(),g("button",{key:0,class:L({"bg-fuscous-gray-100  text-fuscous-gray-600 text-xs rounded-md flex items-center gap-2 px-2 py-1 mt-2":!0,"bg-fuscous-gray-100 text-fuscous-gray-600":c.value,"bg-fuscous-gray-100 text-fuscous-gray-200 cursor-not-allowed":!c.value}),onClick:Q,disabled:!c.value},[S(A,{disabled:!c.value,name:"icon-park-solid:add",size:"14",class:"bg-fuscous-gray-500"},null,8,["disabled"]),T[5]||(T[5]=he("Add question "))],10,Vr)):E("",!0)]),_:1},8,["text"])):E("",!0),p("div",Pr,[T[6]||(T[6]=p("p",null,"Include the stats",-1)),S(ne,{modelValue:k.value.stats,"onUpdate:modelValue":T[1]||(T[1]=Z=>k.value.stats=Z)},null,8,["modelValue"])]),S(le,{onHandleSave:T[2]||(T[2]=Z=>te()),onHandleCancel:Y,isActive:b.value.isActive},null,8,["isActive"])],64)}}});function Nr(){return{getTaskDescription:t=>{let a;switch(t){case"Word bank":a={description:["[ ]"],instructions:"Add a text. Put the words and phrases [in brackets]. They will be shuffled and appear in the box. Students will need to put them into the gaps.",extra:{subtitle:"Add extra words: ",description:"Those words will be considered as extra. Use / to devide options "},example:"I like [walking] in the park in the morning"};break;case"Fill in the gaps":a={description:["[ ]","/","/"],instructions:"Use brackets for gaps: []. Separate a hint from the correct answer by */: [a hint*/the answer]. Use multiple / for multiple correct answers: [a hint/correct answer 1/correct answer 2]. Leave the space before the first / empty for multiple correct answers without a hint: [/correct answer 1/correct answer 2]."};break;default:a={description:[],instructions:""}}return a}}}const za=P({__name:"TaskSelector",setup(e){const t=Oe(),a=D("Multiple choice"),n=j(()=>t.getTask("taskTitle"));W(n,s=>{a.value=s});const{getTaskDescription:o}=Nr();return(s,l)=>(d(),N(sn,{title:O(a)},{default:ce(()=>[O(a)==="Multiple choice"?(d(),N(De,{key:0,typeTask:"multiple_choice",titleTask:"Question "})):E("",!0),O(a)==="True or false"?(d(),N(De,{key:1,typeTask:"true_false",titleTask:"Question"})):E("",!0),O(a)==="Categories"?(d(),N(De,{key:2,typeTask:"category",titleTask:"Category"})):E("",!0),O(a)==="Sorting"?(d(),N(De,{key:3,typeTask:"sorting",titleTask:"Sorting"})):E("",!0),O(a)==="Put in order"?(d(),N(De,{key:4,typeTask:"ordering",titleTask:"Put in the right order"})):E("",!0),O(a)==="Fill in the gaps"||O(a)==="Word bank"?(d(),N(De,{key:5,typeTask:"text_area",description:O(o)(O(a))},null,8,["description"])):E("",!0)]),_:1},8,["title"]))}}),Lr=P({__name:"LayoutBlock",setup(e){return(t,a)=>{const n=st;return d(),g(U,null,[S(Xo),S(Ye,{type:"text_area",title:"Add script",size:"lg","container-class":"py-2"}),S(n,null,{default:ce(()=>[S(za)]),_:1})],64)}}}),Ur=P({__name:"KnowledgeCheckBlock",setup(e){return(t,a)=>{const n=st;return d(),N(n,null,{default:ce(()=>[S(za)]),_:1})}}}),Fr={key:0,class:"text-sm text-gray-600 mb-2"},Hr=["innerHTML"],Rr=P({__name:"Fill",props:{text:{},keywords:{},help_text:{}},setup(e){const t=e,a=j(()=>{const n=t.keywords.map(o=>`<b>${o}</b>`).join(" / ");return t.text.replace("__1__",n)});return(n,o)=>(d(),g("div",null,[n.help_text?(d(),g("p",Fr,M(n.help_text),1)):E("",!0),p("p",{innerHTML:a.value},null,8,Hr)]))}}),Wr={class:"my-4"},qr={class:"space-y-4"},Qr={key:0,class:"w-24 h-24"},Kr=["src"],Yr={key:1,class:"flex-1 flex flex-col gap-2"},Gr={class:"flex items-center gap-2 py-4 text-sm"},Xr=P({__name:"GalleryLayout",setup(e){const t=ot(),a=Oe(),n=j(()=>a.getTask("instructions")),o=kt(),s=D({...Be(String(t.params.classId),"image"),content_details:[]}),l=j(()=>s.value.content_details.length===0?!1:s.value.content_details.every(u=>u.title_gallery.trim()!==""&&u.description_gallery.trim()!==""&&u.image_gallery!==null)),r=u=>{const f=URL.createObjectURL(u);s.value.content_details.push({title_gallery:"",description_gallery:"",image_gallery:f})};W(n,u=>{u&&(s.value={...s.value,tittle:u.title||"",instructions:u.instructions||""})},{deep:!0,immediate:!0}),W(s,u=>{console.log("Task Data:",JSON.parse(JSON.stringify(u)))},{deep:!0});const i=async()=>{try{const u=new FormData;u.append("class_id",String(t.params.classId)),u.append("content_type","image"),u.append("tittle",s.value.tittle),u.append("instructions",s.value.instructions),u.append("stats",String(s.value.stats)),s.value.content_details.forEach((f,y)=>{f.image_gallery&&(u.append(`images[${y}]`,f.image_gallery),u.append(`titles[${y}]`,f.title_gallery),u.append(`descriptions[${y}]`,f.description_gallery))}),await o.mutateAsync(u),c()}catch(u){console.error("Error saving gallery:",u)}},c=()=>{a.addTask("modal",{modal:!1}),s.value={...Be(String(t.params.classId),"image"),content_details:[]}};return(u,f)=>{const y=Ye,m=qe,h=it,x=rt;return d(),g("div",Wr,[f[3]||(f[3]=p("h2",{class:"text-md font-bold text-gray-700"},"Images",-1)),p("div",qr,[(d(!0),g(U,null,J(s.value.content_details,(b,_)=>(d(),g("div",{key:_,class:"flex gap-4"},[b.image_gallery?(d(),g("div",Qr,[p("img",{src:b.image_gallery,class:"w-full h-full object-cover rounded-lg",alt:"Preview"},null,8,Kr)])):E("",!0),b.image_gallery?(d(),g("div",Yr,[S(y,{title:"Title",type:"text",class:"text-md",modelValue:b.title_gallery,"onUpdate:modelValue":w=>b.title_gallery=w},null,8,["modelValue","onUpdate:modelValue"]),S(y,{title:"Description",type:"text_area",size:"md",modelValue:b.description_gallery,"onUpdate:modelValue":w=>b.description_gallery=w,class:"text-md"},null,8,["modelValue","onUpdate:modelValue"])])):E("",!0)]))),128))]),S(m,{fileType:"image",icon:"true",onFileSelected:r,class:"mt-4"}),p("div",Gr,[f[2]||(f[2]=p("p",null,"Include the stats",-1)),S(h,{modelValue:s.value.stats,"onUpdate:modelValue":f[0]||(f[0]=b=>s.value.stats=b)},null,8,["modelValue"])]),S(x,{onHandleSave:f[1]||(f[1]=b=>i()),onHandleCancel:c,isActive:l.value},null,8,["isActive"])])}}}),Jr={class:"relative rounded-2xl p-8 border-2 border-orange-400"},Zr={class:"mt-4 text-center"},ei={class:"text-2xl font-bold text-red-500 mb-4"},ti={class:"text-gray-600"},ai={class:"relative rounded-2xl p-8 border-2 border-green-400"},ni={class:"ml-4 text-left"},oi={class:"text-2xl font-bold text-green-600 mb-4"},si={class:"text-gray-600"},ri={class:"relative rounded-2xl p-8 border-2 border-blue-400"},ii={class:"ml-4 text-left"},li={class:"text-2xl font-bold text-blue-600 mb-4"},ui={class:"text-gray-600"},ci=P({__name:"InfoBoxStudent",props:{task:{}},setup(e){return(t,a)=>(d(),g(U,null,[ye(p("div",Jr,[a[0]||(a[0]=p("div",{class:"absolute -top-5 left-1/2 transform -translate-x-1/2 z-1"},[p("div",{class:"w-10 h-10 rounded-full bg-gradient-to-b from-orange-400 to-red-500 flex items-center justify-center"},[p("span",{class:"text-white text-xl font-bold"},"!")])],-1)),p("div",Zr,[p("h2",ei,M(t.task.tittle),1),p("p",ti,M(t.task.instructions),1)])],512),[[we,t.task.content_details[0].info_type==="attention"]]),ye(p("div",ai,[a[1]||(a[1]=p("div",{class:"absolute -left-5 top-1/2 transform -translate-y-1/2 z-1"},[p("div",{class:"w-10 h-10 rounded-full bg-gradient-to-b from-green-400 to-green-600 flex items-center justify-center"},[p("span",{class:"text-white text-xl font-bold"},"i")])],-1)),p("div",ni,[p("h2",oi,M(t.task.tittle),1),p("p",si,M(t.task.instructions),1)])],512),[[we,t.task.content_details[0].info_type==="grammar"]]),ye(p("div",ri,[a[2]||(a[2]=p("div",{class:"absolute -left-5 top-1/2 transform -translate-y-1/2 z-1"},[p("div",{class:"w-10 h-10 rounded-full bg-gradient-to-b from-blue-400 to-blue-600 flex items-center justify-center"},[p("span",{class:"text-white text-xl font-bold"},"💡")])],-1)),p("div",ii,[p("h2",li,M(t.task.tittle),1),p("p",ui,M(t.task.instructions),1)])],512),[[we,t.task.content_details[0].info_type==="tip"]])],64))}}),di={class:"w-full"},pi={key:0,class:"flex justify-center items-center mt-4"},fi={key:1,class:"text-red-500 flex justify-center items-center mt-4"},vi={key:2,class:"mt-4 text-fuscous-gray-950"},mi=["onClick"],gi={key:0},yi={class:"flex justify-start gap-2 my-2"},hi={class:"bg-tarawera-200 text-tarawera-800 px-2 py-1 rounded-md"},bi={class:"text-lg font-bold"},_i={class:"text-sm text-fuscous-gray-700"},xi={key:0,class:"flex gap-2"},wi={key:1},ki={key:2},$i={key:6},Ti={key:3,class:"font-bold items-center text-center mt-4 text-fuscous-gray-950 text-md"},Ci={key:4},Oi={class:"pb-10"},Di=P({__name:"[classId]",setup(e){const t=Oe(),a=ot(),{capitalizeFirstLetter:n}=da(),{isOpen:o,closeModal:s,openModal:l}=an(),{beforeEnter:r,enter:i,leave:c}=lo(),u=D({label:"",name:""}),f=D({title:"",instructions:""}),y=D(!1),m=D(-1),h=D(null),x=_t(),{getDataMenu:b}=po(),_=a.params.classId,w=j(()=>t.getTask("modal"));W(w,()=>{s()});const C=(B,V)=>{u.value={label:B,name:V},l()},$=B=>b(B),{data:I,isLoading:z,error:k}=nn({queryKey:["class-contents",_],queryFn:async()=>{const B=await xt.get(`${wt.classContent}?class_id=${_}`);return console.log("response",B.data),B.data}});W(I,B=>{if(B!=null&&B.data){s(),y.value=!1;const V=[...B.data];t.insertionIndex!==-1&&(x.setQueryData(["class-contents",_],{...B,data:V}),t.setInsertionIndex(-1))}});const H=()=>{switch(u.value.label){case"Layout block":return Lr;case"Video layout":return ba;case"Text block":return Fo;case"Info block":return _a;case"Multimedia block":return Wo;case"Knowledge check":return Ur;case"Gallery layout":return Xr;default:return null}},R=B=>{var V;m.value=B,(V=I.value)!=null&&V.data&&(h.value=I.value.data[B],console.log("Selected Task:",h.value)),y.value=!0,t.setInsertionIndex(B)},F=()=>{m.value=-1,y.value=!0},Q=B=>{var te,Y,v;if(!((te=I.value)!=null&&te.data))return"";let V=1,X=0;for(let T=0;T<=B;T++)if(((Y=I.value.data[T])==null?void 0:Y.tittle)!==""&&(X++,T===B))return`${V}.${X}`;return(v=I.value.data[B])!=null&&v.tittle?`${V}.${X}`:""};return(B,V)=>{const X=fn,te=yn,Y=wn;return d(),g("div",di,[O(z)?(d(),g("div",pi,V[1]||(V[1]=[p("p",null,"Loading tasks...",-1)]))):O(k)?(d(),g("div",fi,[p("p",null,"Error loading tasks: "+M(O(k).message),1)])):O(I)&&O(I).data.length>0?(d(),g("div",vi,[(d(!0),g(U,null,J(O(I).data,(v,T)=>(d(),g(U,{key:v.id},[p("div",{class:L([v.content_type==="video"?"cursor-pointer":"mt-3 cursor-pointer shadow-md shadow-fuscous-gray-300 rounded-lg p-4 my-4"]),onClick:A=>R(T)},[v.tittle!==""&&v.content_type!=="video"&&v.content_type!=="info_box"?(d(),g("div",gi,[p("div",yi,[p("p",hi,M(Q(T)),1),p("h3",bi,M(O(n)(v.tittle)),1)]),p("p",null,M(v.instructions),1)])):E("",!0),p("div",_i,[v.content_type==="multiple_choice"||v.content_type==="category"?(d(),g("div",xi,[S(X,{data:v},null,8,["data"])])):v.content_type==="true_false"?(d(),g("div",wi,[(d(!0),g(U,null,J(v.content_details.questions,(A,K)=>(d(),N(te,{key:K,question:A},null,8,["question"]))),128))])):v.content_type==="fill_gaps"?(d(),g("div",ki,[(d(!0),g(U,null,J(v.content_details.passages,(A,K)=>(d(),N(Rr,{key:K,text:A.text,keywords:A.keywords,help_text:A.help_text,class:"my-4"},null,8,["text","keywords","help_text"]))),128))])):v.content_type==="word_bank"?(d(),N(Y,{key:3,data:v.content_details.word_bank},null,8,["data"])):v.content_type==="video"?(d(),N(io,{key:4,task:v,index:Q(T)},null,8,["task","index"])):v.content_type==="audio"?(d(),N(Jn,{key:5,task:v},null,8,["task"])):v.content_type==="info_box"?(d(),g("div",$i,[S(ci,{task:v},null,8,["task"])])):E("",!0)])],10,mi),S(ht,{name:"slide-up",onBeforeEnter:O(r),onEnter:O(i),onLeave:O(c),css:!1},{default:ce(()=>[y.value&&m.value===T&&!O(o)?(d(),N(Ft,{key:0,onOpenModal:C})):E("",!0)]),_:2},1032,["onBeforeEnter","onEnter","onLeave"])],64))),128))])):(d(),g("div",Ti,[p("div",null,[V[2]||(V[2]=p("p",null,"There are no activities created for this course yet.",-1)),p("button",{onClick:F,class:"hover:underline hover:text-tarawera-700 text-fuscous-gray-950 px-4 py-2 rounded-md"}," Add Block "),y.value&&!O(o)?(d(),N(Ft,{key:0,onOpenModal:C})):E("",!0)])])),O(o)?(d(),g("div",Ci,[S(Fn,{"is-open":O(o),onClose:O(s),title:u.value.label,modelValue:f.value,"onUpdate:modelValue":V[0]||(V[0]=v=>f.value=v),class:"max-h-[80vh] overflow-y-auto",icon:u.value.name,menuItems:$(u.value.label)},{default:ce(()=>[p("div",Oi,[(d(),N(Ga(H()),{selectedTask:h.value},null,8,["selectedTask"]))])]),_:1},8,["is-open","onClose","title","modelValue","icon","menuItems"])])):E("",!0)])}}});export{Di as default};
